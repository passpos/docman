<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Reconfigurator (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.cluster.coordination, class: Reconfigurator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.cluster.coordination</a></div>
<h1 title="Class Reconfigurator" class="title">Class Reconfigurator</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">org.elasticsearch.cluster.coordination.Reconfigurator</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">Reconfigurator</span>
extends java.lang.Object</pre>
<div class="block">Computes the optimal configuration of voting nodes in the cluster.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CLUSTER_AUTO_SHRINK_VOTING_CONFIGURATION">CLUSTER_AUTO_SHRINK_VOTING_CONFIGURATION</a></span></code></th>
<td class="colLast">
<div class="block">The cluster usually requires a vote from at least half of the master nodes in order to commit a cluster state update, and to achieve
 the best resilience it makes automatic adjustments to the voting configuration as master nodes join or leave the cluster.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.common.settings.Settings,org.elasticsearch.common.settings.ClusterSettings)">Reconfigurator</a></span>&#8203;(<a href="../../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="../../common/settings/ClusterSettings.html" title="class in org.elasticsearch.common.settings">ClusterSettings</a>&nbsp;clusterSettings)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code><a href="CoordinationMetadata.VotingConfiguration.html" title="class in org.elasticsearch.cluster.coordination">CoordinationMetadata.VotingConfiguration</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reconfigure(java.util.Set,java.util.Set,org.elasticsearch.cluster.node.DiscoveryNode,org.elasticsearch.cluster.coordination.CoordinationMetadata.VotingConfiguration)">reconfigure</a></span>&#8203;(java.util.Set&lt;<a href="../node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&gt;&nbsp;liveNodes,
java.util.Set&lt;java.lang.String&gt;&nbsp;retiredNodeIds,
<a href="../node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;currentMaster,
<a href="CoordinationMetadata.VotingConfiguration.html" title="class in org.elasticsearch.cluster.coordination">CoordinationMetadata.VotingConfiguration</a>&nbsp;currentConfig)</code></th>
<td class="colLast">
<div class="block">Compute an optimal configuration for the cluster.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAutoShrinkVotingConfiguration(boolean)">setAutoShrinkVotingConfiguration</a></span>&#8203;(boolean&nbsp;autoShrinkVotingConfiguration)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="CLUSTER_AUTO_SHRINK_VOTING_CONFIGURATION">CLUSTER_AUTO_SHRINK_VOTING_CONFIGURATION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</span>&nbsp;<span class="memberName">CLUSTER_AUTO_SHRINK_VOTING_CONFIGURATION</span></div>
<div class="block">The cluster usually requires a vote from at least half of the master nodes in order to commit a cluster state update, and to achieve
 the best resilience it makes automatic adjustments to the voting configuration as master nodes join or leave the cluster. Adjustments
 that fix or increase the size of the voting configuration are always a good idea, but the wisdom of reducing the voting configuration
 size is less clear. For instance, automatically reducing the voting configuration down to a single node means the cluster requires
 this node to operate, which is not resilient: if it broke we could restore every other master-eligible node in the cluster to health
 and still the cluster would be unavailable. However not reducing the voting configuration size can also hamper resilience: in a
 five-node cluster we could lose two nodes and by reducing the voting configuration to the remaining three nodes we could tolerate the
 loss of a further node before failing.

 We offer two options: either we auto-shrink the voting configuration as long as it contains more than three nodes, or we don't and we
 require the user to control the voting configuration manually using the retirement API. The former, default, option, guarantees that
 as long as there have been at least three master-eligible nodes in the cluster and no more than one of them is currently unavailable,
 then the cluster will still operate, which is what almost everyone wants. Manual control is for users who want different guarantees.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.elasticsearch.common.settings.Settings,org.elasticsearch.common.settings.ClusterSettings)">Reconfigurator</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">Reconfigurator</span>&#8203;(<span class="arguments"><a href="../../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="../../common/settings/ClusterSettings.html" title="class in org.elasticsearch.common.settings">ClusterSettings</a>&nbsp;clusterSettings)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="setAutoShrinkVotingConfiguration(boolean)">setAutoShrinkVotingConfiguration</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setAutoShrinkVotingConfiguration</span>&#8203;(<span class="arguments">boolean&nbsp;autoShrinkVotingConfiguration)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="toString()">toString</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">toString</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="reconfigure(java.util.Set,java.util.Set,org.elasticsearch.cluster.node.DiscoveryNode,org.elasticsearch.cluster.coordination.CoordinationMetadata.VotingConfiguration)">reconfigure</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="CoordinationMetadata.VotingConfiguration.html" title="class in org.elasticsearch.cluster.coordination">CoordinationMetadata.VotingConfiguration</a></span>&nbsp;<span class="memberName">reconfigure</span>&#8203;(<span class="arguments">java.util.Set&lt;<a href="../node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&gt;&nbsp;liveNodes,
java.util.Set&lt;java.lang.String&gt;&nbsp;retiredNodeIds,
<a href="../node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;currentMaster,
<a href="CoordinationMetadata.VotingConfiguration.html" title="class in org.elasticsearch.cluster.coordination">CoordinationMetadata.VotingConfiguration</a>&nbsp;currentConfig)</span></div>
<div class="block">Compute an optimal configuration for the cluster.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>liveNodes</code> - The live nodes in the cluster. The optimal configuration prefers live nodes over non-live nodes as far as
                       possible.</dd>
<dd><code>retiredNodeIds</code> - Nodes that are leaving the cluster and which should not appear in the configuration if possible. Nodes that are
                       retired and not in the current configuration will never appear in the resulting configuration; this is useful
                       for shifting the vote in a 2-node cluster so one of the nodes can be restarted without harming availability.</dd>
<dd><code>currentMaster</code> - The current master. Unless retired, we prefer to keep the current master in the config.</dd>
<dd><code>currentConfig</code> - The current configuration. As far as possible, we prefer to keep the current config as-is.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An optimal configuration, or leave the current configuration unchanged if the optimal configuration has no live quorum.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
