<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>BlobStoreRepository (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.repositories.blobstore, class: BlobStoreRepository">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":6,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":6,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.repositories.blobstore</a></div>
<h1 title="Class BlobStoreRepository" class="title">Class BlobStoreRepository</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance"><a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">org.elasticsearch.common.component.AbstractLifecycleComponent</a>
<div class="inheritance">org.elasticsearch.repositories.blobstore.BlobStoreRepository</div>
</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code>, <code><a href="../../common/component/LifecycleComponent.html" title="interface in org.elasticsearch.common.component">LifecycleComponent</a></code>, <code><a href="../../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></code>, <code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../fs/FsRepository.html" title="class in org.elasticsearch.repositories.fs">FsRepository</a></code>, <code><a href="MeteredBlobStoreRepository.html" title="class in org.elasticsearch.repositories.blobstore">MeteredBlobStoreRepository</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">BlobStoreRepository</span>
extends <a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a>
implements <a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></pre>
<div class="block">BlobStore - based implementation of Snapshot Repository
 <p>
 This repository works with any <a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore"><code>BlobStore</code></a> implementation. The blobStore could be (and preferred) lazy initialized in
 <a href="#createBlobStore()"><code>createBlobStore()</code></a>.
 </p>
 For in depth documentation on how exactly implementations of this class interact with the snapshot functionality please refer to the
 documentation of the package <a href="package-summary.html"><code>org.elasticsearch.repositories.blobstore</code></a>.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="inheritedList">
<h2>Nested classes/interfaces inherited from interface&nbsp;org.elasticsearch.repositories.<a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></h2>
<a id="nested.classes.inherited.from.class.org.elasticsearch.repositories.Repository">
<!--   -->
</a><code><a href="../Repository.Factory.html" title="interface in org.elasticsearch.repositories">Repository.Factory</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ALLOW_CONCURRENT_MODIFICATION">ALLOW_CONCURRENT_MODIFICATION</a></span></code></th>
<td class="colLast">
<div class="block">When set to <code>true</code>, <code>bestEffortConsistency</code> will be set to <code>true</code> and concurrent modifications of the repository
 contents will not result in the repository being marked as corrupted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;<a href="../../common/unit/ByteSizeValue.html" title="class in org.elasticsearch.common.unit">ByteSizeValue</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#BUFFER_SIZE_SETTING">BUFFER_SIZE_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Size hint for the IO buffer size to use when reading from and writing to the repository.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bufferSize">bufferSize</a></span></code></th>
<td class="colLast">
<div class="block">IO buffer size hint for reading and writing to the underlying blob store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CACHE_REPOSITORY_DATA">CACHE_REPOSITORY_DATA</a></span></code></th>
<td class="colLast">
<div class="block">Setting to disable caching of the latest repository data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#GLOBAL_METADATA_FORMAT">GLOBAL_METADATA_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_FILE_PREFIX">INDEX_FILE_PREFIX</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_LATEST_BLOB">INDEX_LATEST_BLOB</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../cluster/metadata/IndexMetadata.html" title="class in org.elasticsearch.cluster.metadata">IndexMetadata</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_METADATA_FORMAT">INDEX_METADATA_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../index/snapshots/blobstore/BlobStoreIndexShardSnapshot.html" title="class in org.elasticsearch.index.snapshots.blobstore">BlobStoreIndexShardSnapshot</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_SHARD_SNAPSHOT_FORMAT">INDEX_SHARD_SNAPSHOT_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../index/snapshots/blobstore/BlobStoreIndexShardSnapshots.html" title="class in org.elasticsearch.index.snapshots.blobstore">BlobStoreIndexShardSnapshots</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_SHARD_SNAPSHOTS_FORMAT">INDEX_SHARD_SNAPSHOTS_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_SNAPSHOTS_SETTING">MAX_SNAPSHOTS_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Setting that defines the maximum number of snapshots to which the repository may grow.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata">RepositoryMetadata</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#metadata">metadata</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#METADATA_NAME_FORMAT">METADATA_NAME_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#METADATA_PREFIX">METADATA_PREFIX</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../snapshots/SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SNAPSHOT_FORMAT">SNAPSHOT_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SNAPSHOT_NAME_FORMAT">SNAPSHOT_NAME_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SNAPSHOT_PREFIX">SNAPSHOT_PREFIX</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SUPPORT_URL_REPO">SUPPORT_URL_REPO</a></span></code></th>
<td class="colLast">
<div class="block">Setting to disable writing the <code>index.latest</code> blob which enables the contents of this repository to be used with a
 url-repository.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#supportURLRepo">supportURLRepo</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../threadpool/ThreadPool.html" title="class in org.elasticsearch.threadpool">ThreadPool</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#threadPool">threadPool</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h3>Fields inherited from class&nbsp;org.elasticsearch.common.component.<a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></h3>
<a id="fields.inherited.from.class.org.elasticsearch.common.component.AbstractLifecycleComponent">
<!--   -->
</a><code><a href="../../common/component/AbstractLifecycleComponent.html#lifecycle">lifecycle</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.cluster.metadata.RepositoryMetadata,boolean,org.elasticsearch.common.xcontent.NamedXContentRegistry,org.elasticsearch.cluster.service.ClusterService,org.elasticsearch.common.util.BigArrays,org.elasticsearch.indices.recovery.RecoverySettings)">BlobStoreRepository</a></span>&#8203;(<a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata">RepositoryMetadata</a>&nbsp;metadata,
boolean&nbsp;compress,
org.elasticsearch.common.xcontent.NamedXContentRegistry&nbsp;namedXContentRegistry,
<a href="../../cluster/service/ClusterService.html" title="class in org.elasticsearch.cluster.service">ClusterService</a>&nbsp;clusterService,
<a href="../../common/util/BigArrays.html" title="class in org.elasticsearch.common.util">BigArrays</a>&nbsp;bigArrays,
<a href="../../indices/recovery/RecoverySettings.html" title="class in org.elasticsearch.indices.recovery">RecoverySettings</a>&nbsp;recoverySettings)</code></th>
<td class="colLast">
<div class="block">Constructs new BlobStoreRepository</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#assertSnapshotOrGenericThread()">assertSnapshotOrGenericThread</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>abstract <a href="../../common/blobstore/BlobPath.html" title="class in org.elasticsearch.common.blobstore">BlobPath</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#basePath()">basePath</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns base path of the repository</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>protected <a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore">BlobContainer</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#blobContainer()">blobContainer</a></span>()</code></th>
<td class="colLast">
<div class="block">maintains single lazy instance of <a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore"><code>BlobContainer</code></a></div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore">BlobStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#blobStore()">blobStore</a></span>()</code></th>
<td class="colLast">
<div class="block">Maintains single lazy instance of <a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore"><code>BlobStore</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>protected <a href="../../common/unit/ByteSizeValue.html" title="class in org.elasticsearch.common.unit">ByteSizeValue</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#chunkSize()">chunkSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns data file chunk size.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cleanup(long,org.elasticsearch.Version,org.elasticsearch.action.ActionListener)">cleanup</a></span>&#8203;(long&nbsp;repositoryStateId,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryCleanupResult.html" title="class in org.elasticsearch.repositories">RepositoryCleanupResult</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Runs cleanup actions on the repository.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cloneShardSnapshot(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.RepositoryShardId,java.lang.String,org.elasticsearch.action.ActionListener)">cloneShardSnapshot</a></span>&#8203;(<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;source,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;target,
<a href="../RepositoryShardId.html" title="class in org.elasticsearch.repositories">RepositoryShardId</a>&nbsp;shardId,
java.lang.String&nbsp;shardGeneration,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.String&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Clones a shard snapshot.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>protected abstract <a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore">BlobStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createBlobStore()">createBlobStore</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates new BlobStore to read and write data.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteSnapshots(java.util.Collection,long,org.elasticsearch.Version,org.elasticsearch.action.ActionListener)">deleteSnapshots</a></span>&#8203;(java.util.Collection&lt;<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&gt;&nbsp;snapshotIds,
long&nbsp;repositoryStateId,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Deletes snapshots</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doClose()">doClose</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doStart()">doStart</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doStop()">doStop</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#endVerification(java.lang.String)">endVerification</a></span>&#8203;(java.lang.String&nbsp;seed)</code></th>
<td class="colLast">
<div class="block">Called at the end of repository verification process.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executeConsistentStateUpdate(java.util.function.Function,java.lang.String,java.util.function.Consumer)">executeConsistentStateUpdate</a></span>&#8203;(java.util.function.Function&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>,&#8203;<a href="../../cluster/ClusterStateUpdateTask.html" title="class in org.elasticsearch.cluster">ClusterStateUpdateTask</a>&gt;&nbsp;createUpdateTask,
java.lang.String&nbsp;source,
java.util.function.Consumer&lt;java.lang.Exception&gt;&nbsp;onFailure)</code></th>
<td class="colLast">
<div class="block">Execute a cluster state update with a consistent view of the current <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finalizeSnapshot(org.elasticsearch.repositories.ShardGenerations,long,org.elasticsearch.cluster.metadata.Metadata,org.elasticsearch.snapshots.SnapshotInfo,org.elasticsearch.Version,java.util.function.Function,org.elasticsearch.action.ActionListener)">finalizeSnapshot</a></span>&#8203;(<a href="../ShardGenerations.html" title="class in org.elasticsearch.repositories">ShardGenerations</a>&nbsp;shardGenerations,
long&nbsp;repositoryStateId,
<a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a>&nbsp;clusterMetadata,
<a href="../../snapshots/SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&nbsp;snapshotInfo,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
java.util.function.Function&lt;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>,&#8203;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&gt;&nbsp;stateTransformer,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Finalizes snapshotting process</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>protected <a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore">BlobStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBlobStore()">getBlobStore</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code><a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata">RepositoryMetadata</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMetadata()">getMetadata</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns metadata about this repository.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRepositoryData(org.elasticsearch.action.ActionListener)">getRepositoryData</a></span>&#8203;(<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Returns a <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a> to describe the data in the repository, including the snapshots
 and the indices across all snapshots found in the repository.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRestoreThrottleTimeInNanos()">getRestoreThrottleTimeInNanos</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns restore throttle time in nanoseconds</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code><a href="../../index/snapshots/IndexShardSnapshotStatus.html" title="class in org.elasticsearch.index.snapshots">IndexShardSnapshotStatus</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getShardSnapshotStatus(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId)">getShardSnapshotStatus</a></span>&#8203;(<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
<a href="../../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId)</code></th>
<td class="colLast">
<div class="block">Retrieve shard snapshot status for the stored snapshot</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code><a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSnapshotGlobalMetadata(org.elasticsearch.snapshots.SnapshotId)">getSnapshotGlobalMetadata</a></span>&#8203;(<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId)</code></th>
<td class="colLast">
<div class="block">Returns global metadata associated with the snapshot.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code><a href="../../cluster/metadata/IndexMetadata.html" title="class in org.elasticsearch.cluster.metadata">IndexMetadata</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSnapshotIndexMetaData(org.elasticsearch.repositories.RepositoryData,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId)">getSnapshotIndexMetaData</a></span>&#8203;(<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&nbsp;repositoryData,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Returns the index metadata associated with the snapshot.</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code><a href="../../snapshots/SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSnapshotInfo(org.elasticsearch.snapshots.SnapshotId)">getSnapshotInfo</a></span>&#8203;(<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId)</code></th>
<td class="colLast">
<div class="block">Reads snapshot description from repository.</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSnapshotThrottleTimeInNanos()">getSnapshotThrottleTimeInNanos</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns snapshot throttle time in nanoseconds</div>
</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeSnapshot(org.elasticsearch.snapshots.SnapshotId,java.util.List,org.elasticsearch.cluster.metadata.Metadata)">initializeSnapshot</a></span>&#8203;(<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
java.util.List&lt;<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&gt;&nbsp;indices,
<a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a>&nbsp;clusterMetadata)</code></th>
<td class="colLast">
<div class="block">Starts snapshotting process</div>
</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isCompress()">isCompress</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true if metadata and snapshot files should be compressed</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isReadOnly()">isReadOnly</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true if the repository supports only read operations</div>
</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code><a href="../../index/snapshots/blobstore/BlobStoreIndexShardSnapshot.html" title="class in org.elasticsearch.index.snapshots.blobstore">BlobStoreIndexShardSnapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadShardSnapshot(org.elasticsearch.common.blobstore.BlobContainer,org.elasticsearch.snapshots.SnapshotId)">loadShardSnapshot</a></span>&#8203;(<a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore">BlobContainer</a>&nbsp;shardContainer,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId)</code></th>
<td class="colLast">
<div class="block">Loads information about shard snapshot</div>
</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>java.io.InputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maybeRateLimitRestores(java.io.InputStream)">maybeRateLimitRestores</a></span>&#8203;(java.io.InputStream&nbsp;stream)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>java.io.InputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maybeRateLimitSnapshots(java.io.InputStream)">maybeRateLimitSnapshots</a></span>&#8203;(java.io.InputStream&nbsp;stream)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restoreShard(org.elasticsearch.index.store.Store,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId,org.elasticsearch.indices.recovery.RecoveryState,org.elasticsearch.action.ActionListener)">restoreShard</a></span>&#8203;(<a href="../../index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
<a href="../../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;snapshotShardId,
<a href="../../indices/recovery/RecoveryState.html" title="class in org.elasticsearch.indices.recovery">RecoveryState</a>&nbsp;recoveryState,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Restores snapshot of the shard.</div>
</td>
</tr>
<tr class="rowColor" id="i31">
<td class="colFirst"><code><a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore">BlobContainer</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardContainer(org.elasticsearch.repositories.IndexId,int)">shardContainer</a></span>&#8203;(<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
int&nbsp;shardId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i32">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotShard(org.elasticsearch.index.store.Store,org.elasticsearch.index.mapper.MapperService,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.apache.lucene.index.IndexCommit,java.lang.String,org.elasticsearch.index.snapshots.IndexShardSnapshotStatus,org.elasticsearch.Version,java.util.Map,org.elasticsearch.action.ActionListener)">snapshotShard</a></span>&#8203;(<a href="../../index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store,
<a href="../../index/mapper/MapperService.html" title="class in org.elasticsearch.index.mapper">MapperService</a>&nbsp;mapperService,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
org.apache.lucene.index.IndexCommit&nbsp;snapshotIndexCommit,
java.lang.String&nbsp;shardStateIdentifier,
<a href="../../index/snapshots/IndexShardSnapshotStatus.html" title="class in org.elasticsearch.index.snapshots">IndexShardSnapshotStatus</a>&nbsp;snapshotStatus,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;&nbsp;userMetadata,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.String&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Creates a snapshot of the shard based on the index commit point.</div>
</td>
</tr>
<tr class="rowColor" id="i33">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startVerification()">startVerification</a></span>()</code></th>
<td class="colLast">
<div class="block">Verifies repository on the master node and returns the verification token.</div>
</td>
</tr>
<tr class="altColor" id="i34">
<td class="colFirst"><code><a href="../RepositoryStats.html" title="class in org.elasticsearch.repositories">RepositoryStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#stats()">stats</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns stats on the repository usage</div>
</td>
</tr>
<tr class="rowColor" id="i35">
<td class="colFirst"><code><a href="../../threadpool/ThreadPool.html" title="class in org.elasticsearch.threadpool">ThreadPool</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#threadPool()">threadPool</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i36">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i37">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateState(org.elasticsearch.cluster.ClusterState)">updateState</a></span>&#8203;(<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Update the repository with the incoming cluster state.</div>
</td>
</tr>
<tr class="altColor" id="i38">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verify(java.lang.String,org.elasticsearch.cluster.node.DiscoveryNode)">verify</a></span>&#8203;(java.lang.String&nbsp;seed,
<a href="../../cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;localNode)</code></th>
<td class="colLast">
<div class="block">Verifies repository settings on data node.</div>
</td>
</tr>
<tr class="rowColor" id="i39">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeIndexGen(org.elasticsearch.repositories.RepositoryData,long,org.elasticsearch.Version,java.util.function.Function,org.elasticsearch.action.ActionListener)">writeIndexGen</a></span>&#8203;(<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&nbsp;repositoryData,
long&nbsp;expectedGen,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;version,
java.util.function.Function&lt;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>,&#8203;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&gt;&nbsp;stateFilter,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Writing a new index generation is a three step process.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;org.elasticsearch.common.component.<a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></h3>
<a id="methods.inherited.from.class.org.elasticsearch.common.component.AbstractLifecycleComponent">
<!--   -->
</a><code><a href="../../common/component/AbstractLifecycleComponent.html#addLifecycleListener(org.elasticsearch.common.component.LifecycleListener)">addLifecycleListener</a>, <a href="../../common/component/AbstractLifecycleComponent.html#close()">close</a>, <a href="../../common/component/AbstractLifecycleComponent.html#lifecycleState()">lifecycleState</a>, <a href="../../common/component/AbstractLifecycleComponent.html#removeLifecycleListener(org.elasticsearch.common.component.LifecycleListener)">removeLifecycleListener</a>, <a href="../../common/component/AbstractLifecycleComponent.html#start()">start</a>, <a href="../../common/component/AbstractLifecycleComponent.html#stop()">stop</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></div>
<div class="inheritedList">
<h3>Methods inherited from interface&nbsp;org.elasticsearch.common.component.<a href="../../common/component/LifecycleComponent.html" title="interface in org.elasticsearch.common.component">LifecycleComponent</a></h3>
<a id="methods.inherited.from.class.org.elasticsearch.common.component.LifecycleComponent">
<!--   -->
</a><code><a href="../../common/component/LifecycleComponent.html#addLifecycleListener(org.elasticsearch.common.component.LifecycleListener)">addLifecycleListener</a>, <a href="../../common/component/LifecycleComponent.html#lifecycleState()">lifecycleState</a>, <a href="../../common/component/LifecycleComponent.html#removeLifecycleListener(org.elasticsearch.common.component.LifecycleListener)">removeLifecycleListener</a>, <a href="../../common/component/LifecycleComponent.html#start()">start</a>, <a href="../../common/component/LifecycleComponent.html#stop()">stop</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from interface&nbsp;org.elasticsearch.common.lease.<a href="../../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></h3>
<a id="methods.inherited.from.class.org.elasticsearch.common.lease.Releasable">
<!--   -->
</a><code><a href="../../common/lease/Releasable.html#close()">close</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from interface&nbsp;org.elasticsearch.repositories.<a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></h3>
<a id="methods.inherited.from.class.org.elasticsearch.repositories.Repository">
<!--   -->
</a><code><a href="../Repository.html#adaptUserMetadata(java.util.Map)">adaptUserMetadata</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="metadata">metadata</a></h3>
<div class="memberSignature"><span class="modifiers">protected volatile</span>&nbsp;<span class="returnType"><a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata">RepositoryMetadata</a></span>&nbsp;<span class="memberName">metadata</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="threadPool">threadPool</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType"><a href="../../threadpool/ThreadPool.html" title="class in org.elasticsearch.threadpool">ThreadPool</a></span>&nbsp;<span class="memberName">threadPool</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="SNAPSHOT_PREFIX">SNAPSHOT_PREFIX</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">SNAPSHOT_PREFIX</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.repositories.blobstore.BlobStoreRepository.SNAPSHOT_PREFIX">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDEX_FILE_PREFIX">INDEX_FILE_PREFIX</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">INDEX_FILE_PREFIX</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.repositories.blobstore.BlobStoreRepository.INDEX_FILE_PREFIX">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDEX_LATEST_BLOB">INDEX_LATEST_BLOB</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">INDEX_LATEST_BLOB</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.repositories.blobstore.BlobStoreRepository.INDEX_LATEST_BLOB">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="METADATA_PREFIX">METADATA_PREFIX</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">METADATA_PREFIX</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.repositories.blobstore.BlobStoreRepository.METADATA_PREFIX">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="METADATA_NAME_FORMAT">METADATA_NAME_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">METADATA_NAME_FORMAT</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.repositories.blobstore.BlobStoreRepository.METADATA_NAME_FORMAT">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="SNAPSHOT_NAME_FORMAT">SNAPSHOT_NAME_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">SNAPSHOT_NAME_FORMAT</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.repositories.blobstore.BlobStoreRepository.SNAPSHOT_NAME_FORMAT">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="ALLOW_CONCURRENT_MODIFICATION">ALLOW_CONCURRENT_MODIFICATION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</span>&nbsp;<span class="memberName">ALLOW_CONCURRENT_MODIFICATION</span></div>
<div class="block">When set to <code>true</code>, <code>bestEffortConsistency</code> will be set to <code>true</code> and concurrent modifications of the repository
 contents will not result in the repository being marked as corrupted.
 Note: This setting is intended as a backwards compatibility solution for 7.x and will go away in 8.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="CACHE_REPOSITORY_DATA">CACHE_REPOSITORY_DATA</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</span>&nbsp;<span class="memberName">CACHE_REPOSITORY_DATA</span></div>
<div class="block">Setting to disable caching of the latest repository data.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="BUFFER_SIZE_SETTING">BUFFER_SIZE_SETTING</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;<a href="../../common/unit/ByteSizeValue.html" title="class in org.elasticsearch.common.unit">ByteSizeValue</a>&gt;</span>&nbsp;<span class="memberName">BUFFER_SIZE_SETTING</span></div>
<div class="block">Size hint for the IO buffer size to use when reading from and writing to the repository.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="SUPPORT_URL_REPO">SUPPORT_URL_REPO</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</span>&nbsp;<span class="memberName">SUPPORT_URL_REPO</span></div>
<div class="block">Setting to disable writing the <code>index.latest</code> blob which enables the contents of this repository to be used with a
 url-repository.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MAX_SNAPSHOTS_SETTING">MAX_SNAPSHOTS_SETTING</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Integer&gt;</span>&nbsp;<span class="memberName">MAX_SNAPSHOTS_SETTING</span></div>
<div class="block">Setting that defines the maximum number of snapshots to which the repository may grow. Trying to create a snapshot into the
 repository that would move it above this size will throw an exception.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="supportURLRepo">supportURLRepo</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">supportURLRepo</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="GLOBAL_METADATA_FORMAT">GLOBAL_METADATA_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a>&gt;</span>&nbsp;<span class="memberName">GLOBAL_METADATA_FORMAT</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDEX_METADATA_FORMAT">INDEX_METADATA_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../cluster/metadata/IndexMetadata.html" title="class in org.elasticsearch.cluster.metadata">IndexMetadata</a>&gt;</span>&nbsp;<span class="memberName">INDEX_METADATA_FORMAT</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="SNAPSHOT_FORMAT">SNAPSHOT_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../snapshots/SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&gt;</span>&nbsp;<span class="memberName">SNAPSHOT_FORMAT</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDEX_SHARD_SNAPSHOT_FORMAT">INDEX_SHARD_SNAPSHOT_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../index/snapshots/blobstore/BlobStoreIndexShardSnapshot.html" title="class in org.elasticsearch.index.snapshots.blobstore">BlobStoreIndexShardSnapshot</a>&gt;</span>&nbsp;<span class="memberName">INDEX_SHARD_SNAPSHOT_FORMAT</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDEX_SHARD_SNAPSHOTS_FORMAT">INDEX_SHARD_SNAPSHOTS_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="ChecksumBlobStoreFormat.html" title="class in org.elasticsearch.repositories.blobstore">ChecksumBlobStoreFormat</a>&lt;<a href="../../index/snapshots/blobstore/BlobStoreIndexShardSnapshots.html" title="class in org.elasticsearch.index.snapshots.blobstore">BlobStoreIndexShardSnapshots</a>&gt;</span>&nbsp;<span class="memberName">INDEX_SHARD_SNAPSHOTS_FORMAT</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="bufferSize">bufferSize</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">bufferSize</span></div>
<div class="block">IO buffer size hint for reading and writing to the underlying blob store.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.elasticsearch.cluster.metadata.RepositoryMetadata,boolean,org.elasticsearch.common.xcontent.NamedXContentRegistry,org.elasticsearch.cluster.service.ClusterService,org.elasticsearch.common.util.BigArrays,org.elasticsearch.indices.recovery.RecoverySettings)">BlobStoreRepository</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="memberName">BlobStoreRepository</span>&#8203;(<span class="arguments"><a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata">RepositoryMetadata</a>&nbsp;metadata,
boolean&nbsp;compress,
org.elasticsearch.common.xcontent.NamedXContentRegistry&nbsp;namedXContentRegistry,
<a href="../../cluster/service/ClusterService.html" title="class in org.elasticsearch.cluster.service">ClusterService</a>&nbsp;clusterService,
<a href="../../common/util/BigArrays.html" title="class in org.elasticsearch.common.util">BigArrays</a>&nbsp;bigArrays,
<a href="../../indices/recovery/RecoverySettings.html" title="class in org.elasticsearch.indices.recovery">RecoverySettings</a>&nbsp;recoverySettings)</span></div>
<div class="block">Constructs new BlobStoreRepository</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadata</code> - The metadata for this repository including name and settings</dd>
<dd><code>clusterService</code> - ClusterService</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="doStart()">doStart</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doStart</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../common/component/AbstractLifecycleComponent.html#doStart()">doStart</a></code>&nbsp;in class&nbsp;<code><a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doStop()">doStop</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doStop</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../common/component/AbstractLifecycleComponent.html#doStop()">doStop</a></code>&nbsp;in class&nbsp;<code><a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doClose()">doClose</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doClose</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../common/component/AbstractLifecycleComponent.html#doClose()">doClose</a></code>&nbsp;in class&nbsp;<code><a href="../../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="executeConsistentStateUpdate(java.util.function.Function,java.lang.String,java.util.function.Consumer)">executeConsistentStateUpdate</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">executeConsistentStateUpdate</span>&#8203;(<span class="arguments">java.util.function.Function&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>,&#8203;<a href="../../cluster/ClusterStateUpdateTask.html" title="class in org.elasticsearch.cluster">ClusterStateUpdateTask</a>&gt;&nbsp;createUpdateTask,
java.lang.String&nbsp;source,
java.util.function.Consumer&lt;java.lang.Exception&gt;&nbsp;onFailure)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#executeConsistentStateUpdate(java.util.function.Function,java.lang.String,java.util.function.Consumer)">Repository</a></code></span></div>
<div class="block">Execute a cluster state update with a consistent view of the current <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a>. The <a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster"><code>ClusterState</code></a> passed to the
 task generated through <code>createUpdateTask</code> is guaranteed to point at the same state for this repository as the did the state
 at the time the <code>RepositoryData</code> was loaded.
 This allows for operations on the repository that need a consistent view of both the cluster state and the repository contents at
 one point in time like for example, checking if a snapshot is in the repository before adding the delete operation for it to the
 cluster state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#executeConsistentStateUpdate(java.util.function.Function,java.lang.String,java.util.function.Consumer)">executeConsistentStateUpdate</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>createUpdateTask</code> - function to supply cluster state update task</dd>
<dd><code>source</code> - the source of the cluster state update task</dd>
<dd><code>onFailure</code> - error handler invoked on failure to get a consistent view of the current <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cloneShardSnapshot(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.RepositoryShardId,java.lang.String,org.elasticsearch.action.ActionListener)">cloneShardSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">cloneShardSnapshot</span>&#8203;(<span class="arguments"><a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;source,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;target,
<a href="../RepositoryShardId.html" title="class in org.elasticsearch.repositories">RepositoryShardId</a>&nbsp;shardId,
@Nullable
java.lang.String&nbsp;shardGeneration,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.String&gt;&nbsp;listener)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#cloneShardSnapshot(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.RepositoryShardId,java.lang.String,org.elasticsearch.action.ActionListener)">Repository</a></code></span></div>
<div class="block">Clones a shard snapshot.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#cloneShardSnapshot(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.RepositoryShardId,java.lang.String,org.elasticsearch.action.ActionListener)">cloneShardSnapshot</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>source</code> - source snapshot</dd>
<dd><code>target</code> - target snapshot</dd>
<dd><code>shardId</code> - shard id</dd>
<dd><code>shardGeneration</code> - shard generation in repo</dd>
<dd><code>listener</code> - listener to complete with new shard generation once clone has completed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="updateState(org.elasticsearch.cluster.ClusterState)">updateState</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">updateState</span>&#8203;(<span class="arguments"><a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;state)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#updateState(org.elasticsearch.cluster.ClusterState)">Repository</a></code></span></div>
<div class="block">Update the repository with the incoming cluster state. This method is invoked from <a href="../RepositoriesService.html#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)"><code>RepositoriesService.applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)</code></a> and
 thus the same semantics as with <a href="../../cluster/ClusterStateApplier.html#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)"><code>ClusterStateApplier.applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)</code></a> apply for the
 <a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster"><code>ClusterState</code></a> that is passed here.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#updateState(org.elasticsearch.cluster.ClusterState)">updateState</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - new cluster state</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="threadPool()">threadPool</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../threadpool/ThreadPool.html" title="class in org.elasticsearch.threadpool">ThreadPool</a></span>&nbsp;<span class="memberName">threadPool</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getBlobStore()">getBlobStore</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore">BlobStore</a></span>&nbsp;<span class="memberName">getBlobStore</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="blobContainer()">blobContainer</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore">BlobContainer</a></span>&nbsp;<span class="memberName">blobContainer</span>()</div>
<div class="block">maintains single lazy instance of <a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore"><code>BlobContainer</code></a></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="blobStore()">blobStore</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore">BlobStore</a></span>&nbsp;<span class="memberName">blobStore</span>()</div>
<div class="block">Maintains single lazy instance of <a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore"><code>BlobStore</code></a>.
 Public for testing.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="createBlobStore()">createBlobStore</a></h3>
<div class="memberSignature"><span class="modifiers">protected abstract</span>&nbsp;<span class="returnType"><a href="../../common/blobstore/BlobStore.html" title="interface in org.elasticsearch.common.blobstore">BlobStore</a></span>&nbsp;<span class="memberName">createBlobStore</span>()
                                      throws <span class="exceptions">java.lang.Exception</span></div>
<div class="block">Creates new BlobStore to read and write data.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="basePath()">basePath</a></h3>
<div class="memberSignature"><span class="modifiers">public abstract</span>&nbsp;<span class="returnType"><a href="../../common/blobstore/BlobPath.html" title="class in org.elasticsearch.common.blobstore">BlobPath</a></span>&nbsp;<span class="memberName">basePath</span>()</div>
<div class="block">Returns base path of the repository</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isCompress()">isCompress</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isCompress</span>()</div>
<div class="block">Returns true if metadata and snapshot files should be compressed</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if compression is needed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="chunkSize()">chunkSize</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="../../common/unit/ByteSizeValue.html" title="class in org.elasticsearch.common.unit">ByteSizeValue</a></span>&nbsp;<span class="memberName">chunkSize</span>()</div>
<div class="block">Returns data file chunk size.
 <p>
 This method should return null if no chunking is needed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>chunk size</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMetadata()">getMetadata</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata">RepositoryMetadata</a></span>&nbsp;<span class="memberName">getMetadata</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getMetadata()">Repository</a></code></span></div>
<div class="block">Returns metadata about this repository.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getMetadata()">getMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="stats()">stats</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../RepositoryStats.html" title="class in org.elasticsearch.repositories">RepositoryStats</a></span>&nbsp;<span class="memberName">stats</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#stats()">Repository</a></code></span></div>
<div class="block">Returns stats on the repository usage</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#stats()">stats</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="initializeSnapshot(org.elasticsearch.snapshots.SnapshotId,java.util.List,org.elasticsearch.cluster.metadata.Metadata)">initializeSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">initializeSnapshot</span>&#8203;(<span class="arguments"><a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
java.util.List&lt;<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&gt;&nbsp;indices,
<a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a>&nbsp;clusterMetadata)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#initializeSnapshot(org.elasticsearch.snapshots.SnapshotId,java.util.List,org.elasticsearch.cluster.metadata.Metadata)">Repository</a></code></span></div>
<div class="block">Starts snapshotting process</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#initializeSnapshot(org.elasticsearch.snapshots.SnapshotId,java.util.List,org.elasticsearch.cluster.metadata.Metadata)">initializeSnapshot</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotId</code> - snapshot id</dd>
<dd><code>indices</code> - list of indices to be snapshotted</dd>
<dd><code>clusterMetadata</code> - cluster metadata</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteSnapshots(java.util.Collection,long,org.elasticsearch.Version,org.elasticsearch.action.ActionListener)">deleteSnapshots</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteSnapshots</span>&#8203;(<span class="arguments">java.util.Collection&lt;<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&gt;&nbsp;snapshotIds,
long&nbsp;repositoryStateId,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#deleteSnapshots(java.util.Collection,long,org.elasticsearch.Version,org.elasticsearch.action.ActionListener)">Repository</a></code></span></div>
<div class="block">Deletes snapshots</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#deleteSnapshots(java.util.Collection,long,org.elasticsearch.Version,org.elasticsearch.action.ActionListener)">deleteSnapshots</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotIds</code> - snapshot ids</dd>
<dd><code>repositoryStateId</code> - the unique id identifying the state of the repository when the snapshot deletion began</dd>
<dd><code>repositoryMetaVersion</code> - version of the updated repository metadata to write</dd>
<dd><code>listener</code> - completion listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cleanup(long,org.elasticsearch.Version,org.elasticsearch.action.ActionListener)">cleanup</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">cleanup</span>&#8203;(<span class="arguments">long&nbsp;repositoryStateId,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryCleanupResult.html" title="class in org.elasticsearch.repositories">RepositoryCleanupResult</a>&gt;&nbsp;listener)</span></div>
<div class="block">Runs cleanup actions on the repository. Increments the repository state id by one before executing any modifications on the
 repository.
 TODO: Add shard level cleanups
 TODO: Add unreferenced index metadata cleanup
 <ul>
     <li>Deleting stale indices <code>cleanupStaleIndices(java.util.Map&lt;java.lang.String, org.elasticsearch.common.blobstore.BlobContainer&gt;, java.util.Set&lt;java.lang.String&gt;)</code></li>
     <li>Deleting unreferenced root level blobs <code>cleanupStaleRootFiles(long, java.util.Collection&lt;org.elasticsearch.snapshots.SnapshotId&gt;, java.util.List&lt;java.lang.String&gt;)</code></li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repositoryStateId</code> - Current repository state id</dd>
<dd><code>repositoryMetaVersion</code> - version of the updated repository metadata to write</dd>
<dd><code>listener</code> - Listener to complete when done</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="finalizeSnapshot(org.elasticsearch.repositories.ShardGenerations,long,org.elasticsearch.cluster.metadata.Metadata,org.elasticsearch.snapshots.SnapshotInfo,org.elasticsearch.Version,java.util.function.Function,org.elasticsearch.action.ActionListener)">finalizeSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">finalizeSnapshot</span>&#8203;(<span class="arguments"><a href="../ShardGenerations.html" title="class in org.elasticsearch.repositories">ShardGenerations</a>&nbsp;shardGenerations,
long&nbsp;repositoryStateId,
<a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a>&nbsp;clusterMetadata,
<a href="../../snapshots/SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&nbsp;snapshotInfo,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
java.util.function.Function&lt;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>,&#8203;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&gt;&nbsp;stateTransformer,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#finalizeSnapshot(org.elasticsearch.repositories.ShardGenerations,long,org.elasticsearch.cluster.metadata.Metadata,org.elasticsearch.snapshots.SnapshotInfo,org.elasticsearch.Version,java.util.function.Function,org.elasticsearch.action.ActionListener)">Repository</a></code></span></div>
<div class="block">Finalizes snapshotting process
 <p>
 This method is called on master after all shards are snapshotted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#finalizeSnapshot(org.elasticsearch.repositories.ShardGenerations,long,org.elasticsearch.cluster.metadata.Metadata,org.elasticsearch.snapshots.SnapshotInfo,org.elasticsearch.Version,java.util.function.Function,org.elasticsearch.action.ActionListener)">finalizeSnapshot</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>shardGenerations</code> - updated shard generations</dd>
<dd><code>repositoryStateId</code> - the unique id identifying the state of the repository when the snapshot began</dd>
<dd><code>clusterMetadata</code> - cluster metadata</dd>
<dd><code>snapshotInfo</code> - SnapshotInfo instance to write for this snapshot</dd>
<dd><code>repositoryMetaVersion</code> - version of the updated repository metadata to write</dd>
<dd><code>stateTransformer</code> - a function that filters the last cluster state update that the snapshot finalization will execute and
                              is used to remove any state tracked for the in-progress snapshot from the cluster state</dd>
<dd><code>listener</code> - listener to be invoked with the new <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a> after completing the snapshot</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSnapshotInfo(org.elasticsearch.snapshots.SnapshotId)">getSnapshotInfo</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../snapshots/SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a></span>&nbsp;<span class="memberName">getSnapshotInfo</span>&#8203;(<span class="arguments"><a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getSnapshotInfo(org.elasticsearch.snapshots.SnapshotId)">Repository</a></code></span></div>
<div class="block">Reads snapshot description from repository.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getSnapshotInfo(org.elasticsearch.snapshots.SnapshotId)">getSnapshotInfo</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotId</code> - snapshot id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>information about snapshot</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSnapshotGlobalMetadata(org.elasticsearch.snapshots.SnapshotId)">getSnapshotGlobalMetadata</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../cluster/metadata/Metadata.html" title="class in org.elasticsearch.cluster.metadata">Metadata</a></span>&nbsp;<span class="memberName">getSnapshotGlobalMetadata</span>&#8203;(<span class="arguments"><a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getSnapshotGlobalMetadata(org.elasticsearch.snapshots.SnapshotId)">Repository</a></code></span></div>
<div class="block">Returns global metadata associated with the snapshot.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getSnapshotGlobalMetadata(org.elasticsearch.snapshots.SnapshotId)">getSnapshotGlobalMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotId</code> - the snapshot id to load the global metadata from</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the global metadata about the snapshot</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSnapshotIndexMetaData(org.elasticsearch.repositories.RepositoryData,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId)">getSnapshotIndexMetaData</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../cluster/metadata/IndexMetadata.html" title="class in org.elasticsearch.cluster.metadata">IndexMetadata</a></span>&nbsp;<span class="memberName">getSnapshotIndexMetaData</span>&#8203;(<span class="arguments"><a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&nbsp;repositoryData,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;index)</span>
                                       throws <span class="exceptions">java.io.IOException</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getSnapshotIndexMetaData(org.elasticsearch.repositories.RepositoryData,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId)">Repository</a></code></span></div>
<div class="block">Returns the index metadata associated with the snapshot.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getSnapshotIndexMetaData(org.elasticsearch.repositories.RepositoryData,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId)">getSnapshotIndexMetaData</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repositoryData</code> - current <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a></dd>
<dd><code>snapshotId</code> - the snapshot id to load the index metadata from</dd>
<dd><code>index</code> - the <a href="../IndexId.html" title="class in org.elasticsearch.repositories"><code>IndexId</code></a> to load the metadata from</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the index metadata about the given index for the given snapshot</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shardContainer(org.elasticsearch.repositories.IndexId,int)">shardContainer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore">BlobContainer</a></span>&nbsp;<span class="memberName">shardContainer</span>&#8203;(<span class="arguments"><a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
int&nbsp;shardId)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSnapshotThrottleTimeInNanos()">getSnapshotThrottleTimeInNanos</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getSnapshotThrottleTimeInNanos</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getSnapshotThrottleTimeInNanos()">Repository</a></code></span></div>
<div class="block">Returns snapshot throttle time in nanoseconds</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getSnapshotThrottleTimeInNanos()">getSnapshotThrottleTimeInNanos</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRestoreThrottleTimeInNanos()">getRestoreThrottleTimeInNanos</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getRestoreThrottleTimeInNanos</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getRestoreThrottleTimeInNanos()">Repository</a></code></span></div>
<div class="block">Returns restore throttle time in nanoseconds</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getRestoreThrottleTimeInNanos()">getRestoreThrottleTimeInNanos</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="assertSnapshotOrGenericThread()">assertSnapshotOrGenericThread</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">assertSnapshotOrGenericThread</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startVerification()">startVerification</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">startVerification</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#startVerification()">Repository</a></code></span></div>
<div class="block">Verifies repository on the master node and returns the verification token.
 <p>
 If the verification token is not null, it's passed to all data nodes for verification. If it's null - no
 additional verification is required</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#startVerification()">startVerification</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>verification token that should be passed to all Index Shard Repositories for additional verification or null</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="endVerification(java.lang.String)">endVerification</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">endVerification</span>&#8203;(<span class="arguments">java.lang.String&nbsp;seed)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#endVerification(java.lang.String)">Repository</a></code></span></div>
<div class="block">Called at the end of repository verification process.
 <p>
 This method should perform all necessary cleanup of the temporary files created in the repository</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#endVerification(java.lang.String)">endVerification</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>seed</code> - verification request generated by <a href="../Repository.html#startVerification()"><code>Repository.startVerification()</code></a> command</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRepositoryData(org.elasticsearch.action.ActionListener)">getRepositoryData</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">getRepositoryData</span>&#8203;(<span class="arguments"><a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getRepositoryData(org.elasticsearch.action.ActionListener)">Repository</a></code></span></div>
<div class="block">Returns a <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a> to describe the data in the repository, including the snapshots
 and the indices across all snapshots found in the repository.  Throws a <a href="../RepositoryException.html" title="class in org.elasticsearch.repositories"><code>RepositoryException</code></a>
 if there was an error in reading the data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getRepositoryData(org.elasticsearch.action.ActionListener)">getRepositoryData</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isReadOnly()">isReadOnly</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isReadOnly</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#isReadOnly()">Repository</a></code></span></div>
<div class="block">Returns true if the repository supports only read operations</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#isReadOnly()">isReadOnly</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the repository is read/only</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="writeIndexGen(org.elasticsearch.repositories.RepositoryData,long,org.elasticsearch.Version,java.util.function.Function,org.elasticsearch.action.ActionListener)">writeIndexGen</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">writeIndexGen</span>&#8203;(<span class="arguments"><a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&nbsp;repositoryData,
long&nbsp;expectedGen,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;version,
java.util.function.Function&lt;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>,&#8203;<a href="../../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&gt;&nbsp;stateFilter,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="../RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&gt;&nbsp;listener)</span></div>
<div class="block">Writing a new index generation is a three step process.
 First, the <a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata"><code>RepositoryMetadata</code></a> entry for this repository is set into a pending state by incrementing its
 pending generation <code>P</code> while its safe generation <code>N</code> remains unchanged.
 Second, the updated <a href="../RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a> is written to generation <code>P + 1</code>.
 Lastly, the <a href="../../cluster/metadata/RepositoryMetadata.html" title="class in org.elasticsearch.cluster.metadata"><code>RepositoryMetadata</code></a> entry for this repository is updated to the new generation <code>P + 1</code> and thus
 pending and safe generation are set to the same value marking the end of the update of the repository data.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repositoryData</code> - RepositoryData to write</dd>
<dd><code>expectedGen</code> - expected repository generation at the start of the operation</dd>
<dd><code>version</code> - version of the repository metadata to write</dd>
<dd><code>stateFilter</code> - filter for the last cluster state update executed by this method</dd>
<dd><code>listener</code> - completion listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="snapshotShard(org.elasticsearch.index.store.Store,org.elasticsearch.index.mapper.MapperService,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.apache.lucene.index.IndexCommit,java.lang.String,org.elasticsearch.index.snapshots.IndexShardSnapshotStatus,org.elasticsearch.Version,java.util.Map,org.elasticsearch.action.ActionListener)">snapshotShard</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">snapshotShard</span>&#8203;(<span class="arguments"><a href="../../index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store,
<a href="../../index/mapper/MapperService.html" title="class in org.elasticsearch.index.mapper">MapperService</a>&nbsp;mapperService,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
org.apache.lucene.index.IndexCommit&nbsp;snapshotIndexCommit,
java.lang.String&nbsp;shardStateIdentifier,
<a href="../../index/snapshots/IndexShardSnapshotStatus.html" title="class in org.elasticsearch.index.snapshots">IndexShardSnapshotStatus</a>&nbsp;snapshotStatus,
<a href="../../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion,
java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;&nbsp;userMetadata,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.String&gt;&nbsp;listener)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#snapshotShard(org.elasticsearch.index.store.Store,org.elasticsearch.index.mapper.MapperService,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.apache.lucene.index.IndexCommit,java.lang.String,org.elasticsearch.index.snapshots.IndexShardSnapshotStatus,org.elasticsearch.Version,java.util.Map,org.elasticsearch.action.ActionListener)">Repository</a></code></span></div>
<div class="block">Creates a snapshot of the shard based on the index commit point.
 <p>
 The index commit point can be obtained by using <a href="../../index/engine/Engine.html#acquireLastIndexCommit(boolean)"><code>Engine.acquireLastIndexCommit(boolean)</code></a> method.
 Repository implementations shouldn't release the snapshot index commit point. It is done by the method caller.
 <p>
 As snapshot process progresses, implementation of this method should update <a href="../../index/snapshots/IndexShardSnapshotStatus.html" title="class in org.elasticsearch.index.snapshots"><code>IndexShardSnapshotStatus</code></a> object and check
 <a href="../../index/snapshots/IndexShardSnapshotStatus.html#isAborted()"><code>IndexShardSnapshotStatus.isAborted()</code></a> to see if the snapshot process should be aborted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#snapshotShard(org.elasticsearch.index.store.Store,org.elasticsearch.index.mapper.MapperService,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.apache.lucene.index.IndexCommit,java.lang.String,org.elasticsearch.index.snapshots.IndexShardSnapshotStatus,org.elasticsearch.Version,java.util.Map,org.elasticsearch.action.ActionListener)">snapshotShard</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>store</code> - store to be snapshotted</dd>
<dd><code>mapperService</code> - the shards mapper service</dd>
<dd><code>snapshotId</code> - snapshot id</dd>
<dd><code>indexId</code> - id for the index being snapshotted</dd>
<dd><code>snapshotIndexCommit</code> - commit point</dd>
<dd><code>shardStateIdentifier</code> - a unique identifier of the state of the shard that is stored with the shard's snapshot and used
                              to detect if the shard has changed between snapshots. If <code>null</code> is passed as the identifier
                              snapshotting will be done by inspecting the physical files referenced by <code>snapshotIndexCommit</code></dd>
<dd><code>snapshotStatus</code> - snapshot status</dd>
<dd><code>repositoryMetaVersion</code> - version of the updated repository metadata to write</dd>
<dd><code>userMetadata</code> - user metadata of the snapshot found in <a href="../../cluster/SnapshotsInProgress.Entry.html#userMetadata()"><code>SnapshotsInProgress.Entry.userMetadata()</code></a></dd>
<dd><code>listener</code> - listener invoked on completion</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="restoreShard(org.elasticsearch.index.store.Store,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId,org.elasticsearch.indices.recovery.RecoveryState,org.elasticsearch.action.ActionListener)">restoreShard</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">restoreShard</span>&#8203;(<span class="arguments"><a href="../../index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
<a href="../../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;snapshotShardId,
<a href="../../indices/recovery/RecoveryState.html" title="class in org.elasticsearch.indices.recovery">RecoveryState</a>&nbsp;recoveryState,
<a href="../../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#restoreShard(org.elasticsearch.index.store.Store,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId,org.elasticsearch.indices.recovery.RecoveryState,org.elasticsearch.action.ActionListener)">Repository</a></code></span></div>
<div class="block">Restores snapshot of the shard.
 <p>
 The index can be renamed on restore, hence different <code>shardId</code> and <code>snapshotShardId</code> are supplied.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#restoreShard(org.elasticsearch.index.store.Store,org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId,org.elasticsearch.indices.recovery.RecoveryState,org.elasticsearch.action.ActionListener)">restoreShard</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>store</code> - the store to restore the index into</dd>
<dd><code>snapshotId</code> - snapshot id</dd>
<dd><code>indexId</code> - id of the index in the repository from which the restore is occurring</dd>
<dd><code>snapshotShardId</code> - shard id (in the snapshot)</dd>
<dd><code>recoveryState</code> - recovery state</dd>
<dd><code>listener</code> - listener to invoke once done</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="maybeRateLimitRestores(java.io.InputStream)">maybeRateLimitRestores</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.io.InputStream</span>&nbsp;<span class="memberName">maybeRateLimitRestores</span>&#8203;(<span class="arguments">java.io.InputStream&nbsp;stream)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="maybeRateLimitSnapshots(java.io.InputStream)">maybeRateLimitSnapshots</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.io.InputStream</span>&nbsp;<span class="memberName">maybeRateLimitSnapshots</span>&#8203;(<span class="arguments">java.io.InputStream&nbsp;stream)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getShardSnapshotStatus(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId)">getShardSnapshotStatus</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../index/snapshots/IndexShardSnapshotStatus.html" title="class in org.elasticsearch.index.snapshots">IndexShardSnapshotStatus</a></span>&nbsp;<span class="memberName">getShardSnapshotStatus</span>&#8203;(<span class="arguments"><a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId,
<a href="../IndexId.html" title="class in org.elasticsearch.repositories">IndexId</a>&nbsp;indexId,
<a href="../../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#getShardSnapshotStatus(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId)">Repository</a></code></span></div>
<div class="block">Retrieve shard snapshot status for the stored snapshot</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#getShardSnapshotStatus(org.elasticsearch.snapshots.SnapshotId,org.elasticsearch.repositories.IndexId,org.elasticsearch.index.shard.ShardId)">getShardSnapshotStatus</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotId</code> - snapshot id</dd>
<dd><code>indexId</code> - the snapshotted index id for the shard to get status for</dd>
<dd><code>shardId</code> - shard id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>snapshot status</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="verify(java.lang.String,org.elasticsearch.cluster.node.DiscoveryNode)">verify</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">verify</span>&#8203;(<span class="arguments">java.lang.String&nbsp;seed,
<a href="../../cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;localNode)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Repository.html#verify(java.lang.String,org.elasticsearch.cluster.node.DiscoveryNode)">Repository</a></code></span></div>
<div class="block">Verifies repository settings on data node.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Repository.html#verify(java.lang.String,org.elasticsearch.cluster.node.DiscoveryNode)">verify</a></code>&nbsp;in interface&nbsp;<code><a href="../Repository.html" title="interface in org.elasticsearch.repositories">Repository</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>seed</code> - value returned by <a href="../Repository.html#startVerification()"><code>Repository.startVerification()</code></a></dd>
<dd><code>localNode</code> - the local node information, for inclusion in verification errors</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="toString()">toString</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">toString</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="loadShardSnapshot(org.elasticsearch.common.blobstore.BlobContainer,org.elasticsearch.snapshots.SnapshotId)">loadShardSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../index/snapshots/blobstore/BlobStoreIndexShardSnapshot.html" title="class in org.elasticsearch.index.snapshots.blobstore">BlobStoreIndexShardSnapshot</a></span>&nbsp;<span class="memberName">loadShardSnapshot</span>&#8203;(<span class="arguments"><a href="../../common/blobstore/BlobContainer.html" title="interface in org.elasticsearch.common.blobstore">BlobContainer</a>&nbsp;shardContainer,
<a href="../../snapshots/SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&nbsp;snapshotId)</span></div>
<div class="block">Loads information about shard snapshot</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
