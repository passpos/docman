<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>SnapshotsService (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.snapshots, class: SnapshotsService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":9,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":9,"i14":9,"i15":9,"i16":9,"i17":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.snapshots</a></div>
<h1 title="Class SnapshotsService" class="title">Class SnapshotsService</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance"><a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">org.elasticsearch.common.component.AbstractLifecycleComponent</a>
<div class="inheritance">org.elasticsearch.snapshots.SnapshotsService</div>
</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code>, <code><a href="../cluster/ClusterStateApplier.html" title="interface in org.elasticsearch.cluster">ClusterStateApplier</a></code>, <code><a href="../common/component/LifecycleComponent.html" title="interface in org.elasticsearch.common.component">LifecycleComponent</a></code>, <code><a href="../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">SnapshotsService</span>
extends <a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a>
implements <a href="../cluster/ClusterStateApplier.html" title="interface in org.elasticsearch.cluster">ClusterStateApplier</a></pre>
<div class="block">Service responsible for creating snapshots. This service runs all the steps executed on the master node during snapshot creation and
 deletion.
 See package level documentation of <a href="package-summary.html"><code>org.elasticsearch.snapshots</code></a> for details.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CLONE_SNAPSHOT_VERSION">CLONE_SNAPSHOT_VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#FULL_CONCURRENCY_VERSION">FULL_CONCURRENCY_VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDEX_GEN_IN_REPO_DATA_VERSION">INDEX_GEN_IN_REPO_DATA_VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_CONCURRENT_SNAPSHOT_OPERATIONS_SETTING">MAX_CONCURRENT_SNAPSHOT_OPERATIONS_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Setting that specifies the maximum number of allowed concurrent snapshot create and delete operations in the
 cluster state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MULTI_DELETE_VERSION">MULTI_DELETE_VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NO_REPO_INITIALIZE_VERSION">NO_REPO_INITIALIZE_VERSION</a></span></code></th>
<td class="colLast">
<div class="block">Minimum node version which does not use <a href="../repositories/Repository.html#initializeSnapshot(org.elasticsearch.snapshots.SnapshotId,java.util.List,org.elasticsearch.cluster.metadata.Metadata)"><code>Repository.initializeSnapshot(SnapshotId, List, Metadata)</code></a> to write snapshot metadata
 when starting a snapshot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#OLD_SNAPSHOT_FORMAT">OLD_SNAPSHOT_FORMAT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SHARD_GEN_IN_REPO_DATA_VERSION">SHARD_GEN_IN_REPO_DATA_VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#UPDATE_SNAPSHOT_STATUS_ACTION_NAME">UPDATE_SNAPSHOT_STATUS_ACTION_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h3>Fields inherited from class&nbsp;org.elasticsearch.common.component.<a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></h3>
<a id="fields.inherited.from.class.org.elasticsearch.common.component.AbstractLifecycleComponent">
<!--   -->
</a><code><a href="../common/component/AbstractLifecycleComponent.html#lifecycle">lifecycle</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.common.settings.Settings,org.elasticsearch.cluster.service.ClusterService,org.elasticsearch.cluster.metadata.IndexNameExpressionResolver,org.elasticsearch.repositories.RepositoriesService,org.elasticsearch.transport.TransportService,org.elasticsearch.action.support.ActionFilters)">SnapshotsService</a></span>&#8203;(<a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="../cluster/service/ClusterService.html" title="class in org.elasticsearch.cluster.service">ClusterService</a>&nbsp;clusterService,
<a href="../cluster/metadata/IndexNameExpressionResolver.html" title="class in org.elasticsearch.cluster.metadata">IndexNameExpressionResolver</a>&nbsp;indexNameExpressionResolver,
<a href="../repositories/RepositoriesService.html" title="class in org.elasticsearch.repositories">RepositoriesService</a>&nbsp;repositoriesService,
<a href="../transport/TransportService.html" title="class in org.elasticsearch.transport">TransportService</a>&nbsp;transportService,
<a href="../action/support/ActionFilters.html" title="class in org.elasticsearch.action.support">ActionFilters</a>&nbsp;actionFilters)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">applyClusterState</a></span>&#8203;(<a href="../cluster/ClusterChangedEvent.html" title="class in org.elasticsearch.cluster">ClusterChangedEvent</a>&nbsp;event)</code></th>
<td class="colLast">
<div class="block">Called when a new cluster state (<a href="../cluster/ClusterChangedEvent.html#state()"><code>ClusterChangedEvent.state()</code></a> needs to be applied.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#assertAllListenersResolved()">assertAllListenersResolved</a></span>()</code></th>
<td class="colLast">
<div class="block">Assert that no in-memory state for any running snapshot-create or -delete operation exists in this instance.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cloneSnapshot(org.elasticsearch.action.admin.cluster.snapshots.clone.CloneSnapshotRequest,org.elasticsearch.action.ActionListener)">cloneSnapshot</a></span>&#8203;(<a href="../action/admin/cluster/snapshots/clone/CloneSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.clone">CloneSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">createSnapshot</a></span>&#8203;(<a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="Snapshot.html" title="class in org.elasticsearch.snapshots">Snapshot</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Initializes the snapshotting process.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createSnapshotLegacy(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">createSnapshotLegacy</a></span>&#8203;(<a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="Snapshot.html" title="class in org.elasticsearch.snapshots">Snapshot</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Initializes the snapshotting process.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>static java.util.List&lt;<a href="../cluster/SnapshotsInProgress.Entry.html" title="class in org.elasticsearch.cluster">SnapshotsInProgress.Entry</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#currentSnapshots(org.elasticsearch.cluster.SnapshotsInProgress,java.lang.String,java.util.List)">currentSnapshots</a></span>&#8203;(<a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster">SnapshotsInProgress</a>&nbsp;snapshotsInProgress,
java.lang.String&nbsp;repository,
java.util.List&lt;java.lang.String&gt;&nbsp;snapshots)</code></th>
<td class="colLast">
<div class="block">Returns status of the currently running snapshots</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteSnapshots(org.elasticsearch.action.admin.cluster.snapshots.delete.DeleteSnapshotRequest,org.elasticsearch.action.ActionListener)">deleteSnapshots</a></span>&#8203;(<a href="../action/admin/cluster/snapshots/delete/DeleteSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.delete">DeleteSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Deletes snapshots from the repository.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doClose()">doClose</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doStart()">doStart</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doStop()">doStop</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executeSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">executeSnapshot</a></span>&#8203;(<a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Same as <a href="#createSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)"><code>createSnapshot(CreateSnapshotRequest, ActionListener)</code></a> but invokes its callback on completion of
 the snapshot.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executeSnapshotLegacy(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">executeSnapshotLegacy</a></span>&#8203;(<a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Same as <a href="#createSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)"><code>createSnapshot(CreateSnapshotRequest, ActionListener)</code></a> but invokes its callback on completion of
 the snapshot.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code><a href="../Version.html" title="class in org.elasticsearch">Version</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minCompatibleVersion(org.elasticsearch.Version,org.elasticsearch.repositories.RepositoryData,java.util.Collection)">minCompatibleVersion</a></span>&#8203;(<a href="../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;minNodeVersion,
<a href="../repositories/RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&nbsp;repositoryData,
java.util.Collection&lt;<a href="SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&gt;&nbsp;excluded)</code></th>
<td class="colLast">
<div class="block">Determines the minimum <a href="../Version.html" title="class in org.elasticsearch"><code>Version</code></a> that the snapshot repository must be compatible with from the current nodes in the cluster
 and the contents of the repository.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>static java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshottingDataStreams(org.elasticsearch.cluster.ClusterState,java.util.Set)">snapshottingDataStreams</a></span>&#8203;(<a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;currentState,
java.util.Set&lt;java.lang.String&gt;&nbsp;dataStreamsToCheck)</code></th>
<td class="colLast">
<div class="block">Returns the data streams that are currently being snapshotted (with partial == false) and that are contained in the
 indices-to-check set.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>static java.util.Set&lt;<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshottingIndices(org.elasticsearch.cluster.ClusterState,java.util.Set)">snapshottingIndices</a></span>&#8203;(<a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;currentState,
java.util.Set&lt;<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&gt;&nbsp;indicesToCheck)</code></th>
<td class="colLast">
<div class="block">Returns the indices that are currently being snapshotted (with partial == false) and that are contained in the indices-to-check set.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>static <a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateWithSnapshots(org.elasticsearch.cluster.ClusterState,org.elasticsearch.cluster.SnapshotsInProgress,org.elasticsearch.cluster.SnapshotDeletionsInProgress)">updateWithSnapshots</a></span>&#8203;(<a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;state,
<a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster">SnapshotsInProgress</a>&nbsp;snapshotsInProgress,
<a href="../cluster/SnapshotDeletionsInProgress.html" title="class in org.elasticsearch.cluster">SnapshotDeletionsInProgress</a>&nbsp;snapshotDeletionsInProgress)</code></th>
<td class="colLast">
<div class="block">Shortcut to build new <a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster"><code>ClusterState</code></a> from the current state and updated values of <a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster"><code>SnapshotsInProgress</code></a> and
 <a href="../cluster/SnapshotDeletionsInProgress.html" title="class in org.elasticsearch.cluster"><code>SnapshotDeletionsInProgress</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#useIndexGenerations(org.elasticsearch.Version)">useIndexGenerations</a></span>&#8203;(<a href="../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion)</code></th>
<td class="colLast">
<div class="block">Checks whether the metadata version supports writing <a href="../repositories/ShardGenerations.html" title="class in org.elasticsearch.repositories"><code>ShardGenerations</code></a> to the repository.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#useShardGenerations(org.elasticsearch.Version)">useShardGenerations</a></span>&#8203;(<a href="../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion)</code></th>
<td class="colLast">
<div class="block">Checks whether the metadata version supports writing <a href="../repositories/ShardGenerations.html" title="class in org.elasticsearch.repositories"><code>ShardGenerations</code></a> to the repository.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;org.elasticsearch.common.component.<a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></h3>
<a id="methods.inherited.from.class.org.elasticsearch.common.component.AbstractLifecycleComponent">
<!--   -->
</a><code><a href="../common/component/AbstractLifecycleComponent.html#addLifecycleListener(org.elasticsearch.common.component.LifecycleListener)">addLifecycleListener</a>, <a href="../common/component/AbstractLifecycleComponent.html#close()">close</a>, <a href="../common/component/AbstractLifecycleComponent.html#lifecycleState()">lifecycleState</a>, <a href="../common/component/AbstractLifecycleComponent.html#removeLifecycleListener(org.elasticsearch.common.component.LifecycleListener)">removeLifecycleListener</a>, <a href="../common/component/AbstractLifecycleComponent.html#start()">start</a>, <a href="../common/component/AbstractLifecycleComponent.html#stop()">stop</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="NO_REPO_INITIALIZE_VERSION">NO_REPO_INITIALIZE_VERSION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">NO_REPO_INITIALIZE_VERSION</span></div>
<div class="block">Minimum node version which does not use <a href="../repositories/Repository.html#initializeSnapshot(org.elasticsearch.snapshots.SnapshotId,java.util.List,org.elasticsearch.cluster.metadata.Metadata)"><code>Repository.initializeSnapshot(SnapshotId, List, Metadata)</code></a> to write snapshot metadata
 when starting a snapshot.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="FULL_CONCURRENCY_VERSION">FULL_CONCURRENCY_VERSION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">FULL_CONCURRENCY_VERSION</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="CLONE_SNAPSHOT_VERSION">CLONE_SNAPSHOT_VERSION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">CLONE_SNAPSHOT_VERSION</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="SHARD_GEN_IN_REPO_DATA_VERSION">SHARD_GEN_IN_REPO_DATA_VERSION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">SHARD_GEN_IN_REPO_DATA_VERSION</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDEX_GEN_IN_REPO_DATA_VERSION">INDEX_GEN_IN_REPO_DATA_VERSION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">INDEX_GEN_IN_REPO_DATA_VERSION</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="OLD_SNAPSHOT_FORMAT">OLD_SNAPSHOT_FORMAT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">OLD_SNAPSHOT_FORMAT</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MULTI_DELETE_VERSION">MULTI_DELETE_VERSION</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">MULTI_DELETE_VERSION</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="UPDATE_SNAPSHOT_STATUS_ACTION_NAME">UPDATE_SNAPSHOT_STATUS_ACTION_NAME</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">UPDATE_SNAPSHOT_STATUS_ACTION_NAME</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.snapshots.SnapshotsService.UPDATE_SNAPSHOT_STATUS_ACTION_NAME">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MAX_CONCURRENT_SNAPSHOT_OPERATIONS_SETTING">MAX_CONCURRENT_SNAPSHOT_OPERATIONS_SETTING</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Integer&gt;</span>&nbsp;<span class="memberName">MAX_CONCURRENT_SNAPSHOT_OPERATIONS_SETTING</span></div>
<div class="block">Setting that specifies the maximum number of allowed concurrent snapshot create and delete operations in the
 cluster state. The number of concurrent operations in a cluster state is defined as the sum of the sizes of
 <a href="../cluster/SnapshotsInProgress.html#entries()"><code>SnapshotsInProgress.entries()</code></a> and <a href="../cluster/SnapshotDeletionsInProgress.html#getEntries()"><code>SnapshotDeletionsInProgress.getEntries()</code></a>.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.elasticsearch.common.settings.Settings,org.elasticsearch.cluster.service.ClusterService,org.elasticsearch.cluster.metadata.IndexNameExpressionResolver,org.elasticsearch.repositories.RepositoriesService,org.elasticsearch.transport.TransportService,org.elasticsearch.action.support.ActionFilters)">SnapshotsService</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">SnapshotsService</span>&#8203;(<span class="arguments"><a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="../cluster/service/ClusterService.html" title="class in org.elasticsearch.cluster.service">ClusterService</a>&nbsp;clusterService,
<a href="../cluster/metadata/IndexNameExpressionResolver.html" title="class in org.elasticsearch.cluster.metadata">IndexNameExpressionResolver</a>&nbsp;indexNameExpressionResolver,
<a href="../repositories/RepositoriesService.html" title="class in org.elasticsearch.repositories">RepositoriesService</a>&nbsp;repositoriesService,
<a href="../transport/TransportService.html" title="class in org.elasticsearch.transport">TransportService</a>&nbsp;transportService,
<a href="../action/support/ActionFilters.html" title="class in org.elasticsearch.action.support">ActionFilters</a>&nbsp;actionFilters)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="executeSnapshotLegacy(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">executeSnapshotLegacy</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">executeSnapshotLegacy</span>&#8203;(<span class="arguments"><a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&gt;&nbsp;listener)</span></div>
<div class="block">Same as <a href="#createSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)"><code>createSnapshot(CreateSnapshotRequest, ActionListener)</code></a> but invokes its callback on completion of
 the snapshot.
 Note: This method is only used in clusters that contain a node older than <a href="#NO_REPO_INITIALIZE_VERSION"><code>NO_REPO_INITIALIZE_VERSION</code></a> to ensure a backwards
 compatible path for initializing the snapshot in the repository is executed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - snapshot request</dd>
<dd><code>listener</code> - snapshot completion listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="createSnapshotLegacy(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">createSnapshotLegacy</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">createSnapshotLegacy</span>&#8203;(<span class="arguments"><a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="Snapshot.html" title="class in org.elasticsearch.snapshots">Snapshot</a>&gt;&nbsp;listener)</span></div>
<div class="block">Initializes the snapshotting process.
 <p>
 This method is used by clients to start snapshot. It makes sure that there is no snapshots are currently running and
 creates a snapshot record in cluster state metadata.
 Note: This method is only used in clusters that contain a node older than <a href="#NO_REPO_INITIALIZE_VERSION"><code>NO_REPO_INITIALIZE_VERSION</code></a> to ensure a backwards
 compatible path for initializing the snapshot in the repository is executed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - snapshot request</dd>
<dd><code>listener</code> - snapshot creation listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="executeSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">executeSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">executeSnapshot</span>&#8203;(<span class="arguments"><a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="SnapshotInfo.html" title="class in org.elasticsearch.snapshots">SnapshotInfo</a>&gt;&nbsp;listener)</span></div>
<div class="block">Same as <a href="#createSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)"><code>createSnapshot(CreateSnapshotRequest, ActionListener)</code></a> but invokes its callback on completion of
 the snapshot.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - snapshot request</dd>
<dd><code>listener</code> - snapshot completion listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="createSnapshot(org.elasticsearch.action.admin.cluster.snapshots.create.CreateSnapshotRequest,org.elasticsearch.action.ActionListener)">createSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">createSnapshot</span>&#8203;(<span class="arguments"><a href="../action/admin/cluster/snapshots/create/CreateSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.create">CreateSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;<a href="Snapshot.html" title="class in org.elasticsearch.snapshots">Snapshot</a>&gt;&nbsp;listener)</span></div>
<div class="block">Initializes the snapshotting process.
 <p>
 This method is used by clients to start snapshot. It makes sure that there is no snapshots are currently running and
 creates a snapshot record in cluster state metadata.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - snapshot request</dd>
<dd><code>listener</code> - snapshot creation listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cloneSnapshot(org.elasticsearch.action.admin.cluster.snapshots.clone.CloneSnapshotRequest,org.elasticsearch.action.ActionListener)">cloneSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">cloneSnapshot</span>&#8203;(<span class="arguments"><a href="../action/admin/cluster/snapshots/clone/CloneSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.clone">CloneSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="currentSnapshots(org.elasticsearch.cluster.SnapshotsInProgress,java.lang.String,java.util.List)">currentSnapshots</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.util.List&lt;<a href="../cluster/SnapshotsInProgress.Entry.html" title="class in org.elasticsearch.cluster">SnapshotsInProgress.Entry</a>&gt;</span>&nbsp;<span class="memberName">currentSnapshots</span>&#8203;(<span class="arguments">@Nullable
<a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster">SnapshotsInProgress</a>&nbsp;snapshotsInProgress,
java.lang.String&nbsp;repository,
java.util.List&lt;java.lang.String&gt;&nbsp;snapshots)</span></div>
<div class="block">Returns status of the currently running snapshots
 <p>
 This method is executed on master node
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotsInProgress</code> - snapshots in progress in the cluster state</dd>
<dd><code>repository</code> - repository id</dd>
<dd><code>snapshots</code> - list of snapshots that will be used as a filter, empty list means no snapshots are filtered</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of metadata for currently running snapshots</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">applyClusterState</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">applyClusterState</span>&#8203;(<span class="arguments"><a href="../cluster/ClusterChangedEvent.html" title="class in org.elasticsearch.cluster">ClusterChangedEvent</a>&nbsp;event)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../cluster/ClusterStateApplier.html#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">ClusterStateApplier</a></code></span></div>
<div class="block">Called when a new cluster state (<a href="../cluster/ClusterChangedEvent.html#state()"><code>ClusterChangedEvent.state()</code></a> needs to be applied. The cluster state to be applied is already
 committed when this method is called, so an applier must therefore be prepared to deal with any state it receives without throwing
 an exception. Throwing an exception from an applier is very bad because it will stop the application of this state before it has
 reached all the other appliers, and will likely result in another attempt to apply the same (or very similar) cluster state which
 might continue until this node is removed from the cluster.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../cluster/ClusterStateApplier.html#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">applyClusterState</a></code>&nbsp;in interface&nbsp;<code><a href="../cluster/ClusterStateApplier.html" title="interface in org.elasticsearch.cluster">ClusterStateApplier</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteSnapshots(org.elasticsearch.action.admin.cluster.snapshots.delete.DeleteSnapshotRequest,org.elasticsearch.action.ActionListener)">deleteSnapshots</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteSnapshots</span>&#8203;(<span class="arguments"><a href="../action/admin/cluster/snapshots/delete/DeleteSnapshotRequest.html" title="class in org.elasticsearch.action.admin.cluster.snapshots.delete">DeleteSnapshotRequest</a>&nbsp;request,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</span></div>
<div class="block">Deletes snapshots from the repository. In-progress snapshots matched by the delete will be aborted before deleting them.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - delete snapshot request</dd>
<dd><code>listener</code> - listener</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="minCompatibleVersion(org.elasticsearch.Version,org.elasticsearch.repositories.RepositoryData,java.util.Collection)">minCompatibleVersion</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Version.html" title="class in org.elasticsearch">Version</a></span>&nbsp;<span class="memberName">minCompatibleVersion</span>&#8203;(<span class="arguments"><a href="../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;minNodeVersion,
<a href="../repositories/RepositoryData.html" title="class in org.elasticsearch.repositories">RepositoryData</a>&nbsp;repositoryData,
@Nullable
java.util.Collection&lt;<a href="SnapshotId.html" title="class in org.elasticsearch.snapshots">SnapshotId</a>&gt;&nbsp;excluded)</span></div>
<div class="block">Determines the minimum <a href="../Version.html" title="class in org.elasticsearch"><code>Version</code></a> that the snapshot repository must be compatible with from the current nodes in the cluster
 and the contents of the repository. The minimum version is determined as the lowest version found across all snapshots in the
 repository and all nodes in the cluster.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>minNodeVersion</code> - minimum node version in the cluster</dd>
<dd><code>repositoryData</code> - current <a href="../repositories/RepositoryData.html" title="class in org.elasticsearch.repositories"><code>RepositoryData</code></a> of that repository</dd>
<dd><code>excluded</code> - snapshot id to ignore when computing the minimum version
                       (used to use newer metadata version after a snapshot delete)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>minimum node version that must still be able to read the repository metadata</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="useShardGenerations(org.elasticsearch.Version)">useShardGenerations</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">useShardGenerations</span>&#8203;(<span class="arguments"><a href="../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion)</span></div>
<div class="block">Checks whether the metadata version supports writing <a href="../repositories/ShardGenerations.html" title="class in org.elasticsearch.repositories"><code>ShardGenerations</code></a> to the repository.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repositoryMetaVersion</code> - version to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if version supports <a href="../repositories/ShardGenerations.html" title="class in org.elasticsearch.repositories"><code>ShardGenerations</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="useIndexGenerations(org.elasticsearch.Version)">useIndexGenerations</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">useIndexGenerations</span>&#8203;(<span class="arguments"><a href="../Version.html" title="class in org.elasticsearch">Version</a>&nbsp;repositoryMetaVersion)</span></div>
<div class="block">Checks whether the metadata version supports writing <a href="../repositories/ShardGenerations.html" title="class in org.elasticsearch.repositories"><code>ShardGenerations</code></a> to the repository.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repositoryMetaVersion</code> - version to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if version supports <a href="../repositories/ShardGenerations.html" title="class in org.elasticsearch.repositories"><code>ShardGenerations</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="updateWithSnapshots(org.elasticsearch.cluster.ClusterState,org.elasticsearch.cluster.SnapshotsInProgress,org.elasticsearch.cluster.SnapshotDeletionsInProgress)">updateWithSnapshots</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType"><a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a></span>&nbsp;<span class="memberName">updateWithSnapshots</span>&#8203;(<span class="arguments"><a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;state,
@Nullable
<a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster">SnapshotsInProgress</a>&nbsp;snapshotsInProgress,
@Nullable
<a href="../cluster/SnapshotDeletionsInProgress.html" title="class in org.elasticsearch.cluster">SnapshotDeletionsInProgress</a>&nbsp;snapshotDeletionsInProgress)</span></div>
<div class="block">Shortcut to build new <a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster"><code>ClusterState</code></a> from the current state and updated values of <a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster"><code>SnapshotsInProgress</code></a> and
 <a href="../cluster/SnapshotDeletionsInProgress.html" title="class in org.elasticsearch.cluster"><code>SnapshotDeletionsInProgress</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - current cluster state</dd>
<dd><code>snapshotsInProgress</code> - new value for <a href="../cluster/SnapshotsInProgress.html" title="class in org.elasticsearch.cluster"><code>SnapshotsInProgress</code></a> or <code>null</code> if it's unchanged</dd>
<dd><code>snapshotDeletionsInProgress</code> - new value for <a href="../cluster/SnapshotDeletionsInProgress.html" title="class in org.elasticsearch.cluster"><code>SnapshotDeletionsInProgress</code></a> or <code>null</code> if it's unchanged</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>updated cluster state</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="snapshottingDataStreams(org.elasticsearch.cluster.ClusterState,java.util.Set)">snapshottingDataStreams</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.util.Set&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">snapshottingDataStreams</span>&#8203;(<span class="arguments"><a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;currentState,
java.util.Set&lt;java.lang.String&gt;&nbsp;dataStreamsToCheck)</span></div>
<div class="block">Returns the data streams that are currently being snapshotted (with partial == false) and that are contained in the
 indices-to-check set.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="snapshottingIndices(org.elasticsearch.cluster.ClusterState,java.util.Set)">snapshottingIndices</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.util.Set&lt;<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&gt;</span>&nbsp;<span class="memberName">snapshottingIndices</span>&#8203;(<span class="arguments"><a href="../cluster/ClusterState.html" title="class in org.elasticsearch.cluster">ClusterState</a>&nbsp;currentState,
java.util.Set&lt;<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&gt;&nbsp;indicesToCheck)</span></div>
<div class="block">Returns the indices that are currently being snapshotted (with partial == false) and that are contained in the indices-to-check set.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doStart()">doStart</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doStart</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../common/component/AbstractLifecycleComponent.html#doStart()">doStart</a></code>&nbsp;in class&nbsp;<code><a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doStop()">doStop</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doStop</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../common/component/AbstractLifecycleComponent.html#doStop()">doStop</a></code>&nbsp;in class&nbsp;<code><a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doClose()">doClose</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doClose</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../common/component/AbstractLifecycleComponent.html#doClose()">doClose</a></code>&nbsp;in class&nbsp;<code><a href="../common/component/AbstractLifecycleComponent.html" title="class in org.elasticsearch.common.component">AbstractLifecycleComponent</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="assertAllListenersResolved()">assertAllListenersResolved</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">assertAllListenersResolved</span>()</div>
<div class="block">Assert that no in-memory state for any running snapshot-create or -delete operation exists in this instance.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
