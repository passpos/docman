<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Store.MetadataSnapshot (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.index.store, class: Store, class: MetadataSnapshot">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":9,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.index.store</a></div>
<h1 title="Class Store.MetadataSnapshot" class="title">Class Store.MetadataSnapshot</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">org.elasticsearch.index.store.Store.MetadataSnapshot</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Iterable&lt;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;</code>, <code><a href="../../common/io/stream/Writeable.html" title="interface in org.elasticsearch.common.io.stream">Writeable</a></code></dd>
</dl>
<dl>
<dt>Enclosing class:</dt>
<dd><a href="Store.html" title="class in org.elasticsearch.index.store">Store</a></dd>
</dl>
<hr>
<pre>public static final class <span class="typeNameLabel">Store.MetadataSnapshot</span>
extends java.lang.Object
implements java.lang.Iterable&lt;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;, <a href="../../common/io/stream/Writeable.html" title="interface in org.elasticsearch.common.io.stream">Writeable</a></pre>
<div class="block">Represents a snapshot of the current directory build from the latest Lucene commit.
 Only files that are part of the last commit are considered in this datastructure.
 For backwards compatibility the snapshot might include legacy checksums that
 are derived from a dedicated checksum file written by older elasticsearch version pre 1.3
 <p>
 Note: This class will ignore the <code>segments.gen</code> file since it's optional and might
 change concurrently for safety reasons.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store"><code>StoreFileMetadata</code></a></dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="inheritedList">
<h2>Nested classes/interfaces inherited from interface&nbsp;org.elasticsearch.common.io.stream.<a href="../../common/io/stream/Writeable.html" title="interface in org.elasticsearch.common.io.stream">Writeable</a></h2>
<a id="nested.classes.inherited.from.class.org.elasticsearch.common.io.stream.Writeable">
<!--   -->
</a><code><a href="../../common/io/stream/Writeable.Reader.html" title="interface in org.elasticsearch.common.io.stream">Writeable.Reader</a>&lt;<a href="../../common/io/stream/Writeable.Reader.html" title="type parameter in Writeable.Reader">V</a>&gt;, <a href="../../common/io/stream/Writeable.Writer.html" title="interface in org.elasticsearch.common.io.stream">Writeable.Writer</a>&lt;<a href="../../common/io/stream/Writeable.Writer.html" title="type parameter in Writeable.Writer">V</a>&gt;</code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="Store.MetadataSnapshot.html" title="class in org.elasticsearch.index.store">Store.MetadataSnapshot</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#EMPTY">EMPTY</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.util.Map,java.util.Map,long)">MetadataSnapshot</a></span>&#8203;(java.util.Map&lt;java.lang.String,&#8203;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;&nbsp;metadata,
java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;commitUserData,
long&nbsp;numDocs)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.common.io.stream.StreamInput)">MetadataSnapshot</a></span>&#8203;(<a href="../../common/io/stream/StreamInput.html" title="class in org.elasticsearch.common.io.stream">StreamInput</a>&nbsp;in)</code></th>
<td class="colLast">
<div class="block">Read from a stream.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,&#8203;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asMap()">asMap</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#contains(java.lang.String)">contains</a></span>&#8203;(java.lang.String&nbsp;existingFile)</code></th>
<td class="colLast">
<div class="block">Returns true iff this metadata contains the given file.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#get(java.lang.String)">get</a></span>&#8203;(java.lang.String&nbsp;name)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCommitUserData()">getCommitUserData</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHistoryUUID()">getHistoryUUID</a></span>()</code></th>
<td class="colLast">
<div class="block">returns the history uuid the store points at, or null if nonexistent.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNumDocs()">getNumDocs</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the number of documents in this store snapshot</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSegmentsFile()">getSegmentsFile</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the segments file that this metadata snapshot represents or null if the snapshot is empty.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSyncId()">getSyncId</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the sync id of the commit point that this MetadataSnapshot represents.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hashFile(org.apache.lucene.util.BytesRefBuilder,java.io.InputStream,long)">hashFile</a></span>&#8203;(org.apache.lucene.util.BytesRefBuilder&nbsp;fileHash,
java.io.InputStream&nbsp;in,
long&nbsp;size)</code></th>
<td class="colLast">
<div class="block">Computes a strong hash value for small files.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>java.util.Iterator&lt;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#iterator()">iterator</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code><a href="Store.RecoveryDiff.html" title="class in org.elasticsearch.index.store">Store.RecoveryDiff</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recoveryDiff(org.elasticsearch.index.store.Store.MetadataSnapshot)">recoveryDiff</a></span>&#8203;(<a href="Store.MetadataSnapshot.html" title="class in org.elasticsearch.index.store">Store.MetadataSnapshot</a>&nbsp;recoveryTargetSnapshot)</code></th>
<td class="colLast">
<div class="block">Returns a diff between the two snapshots that can be used for recovery.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#size()">size</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the number of files in this snapshot</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeTo(org.elasticsearch.common.io.stream.StreamOutput)">writeTo</a></span>&#8203;(<a href="../../common/io/stream/StreamOutput.html" title="class in org.elasticsearch.common.io.stream">StreamOutput</a>&nbsp;out)</code></th>
<td class="colLast">
<div class="block">Write this into the <a href="../../common/io/stream/StreamOutput.html" title="class in org.elasticsearch.common.io.stream">StreamOutput</a>.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
<div class="inheritedList">
<h3>Methods inherited from interface&nbsp;java.lang.Iterable</h3>
<a id="methods.inherited.from.class.java.lang.Iterable">
<!--   -->
</a><code>forEach, spliterator</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="EMPTY">EMPTY</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="Store.MetadataSnapshot.html" title="class in org.elasticsearch.index.store">Store.MetadataSnapshot</a></span>&nbsp;<span class="memberName">EMPTY</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(java.util.Map,java.util.Map,long)">MetadataSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">MetadataSnapshot</span>&#8203;(<span class="arguments">java.util.Map&lt;java.lang.String,&#8203;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;&nbsp;metadata,
java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;&nbsp;commitUserData,
long&nbsp;numDocs)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.elasticsearch.common.io.stream.StreamInput)">MetadataSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">MetadataSnapshot</span>&#8203;(<span class="arguments"><a href="../../common/io/stream/StreamInput.html" title="class in org.elasticsearch.common.io.stream">StreamInput</a>&nbsp;in)</span>
                 throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Read from a stream.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="writeTo(org.elasticsearch.common.io.stream.StreamOutput)">writeTo</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">writeTo</span>&#8203;(<span class="arguments"><a href="../../common/io/stream/StreamOutput.html" title="class in org.elasticsearch.common.io.stream">StreamOutput</a>&nbsp;out)</span>
             throws <span class="exceptions">java.io.IOException</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../common/io/stream/Writeable.html#writeTo(org.elasticsearch.common.io.stream.StreamOutput)">Writeable</a></code></span></div>
<div class="block">Write this into the <a href="../../common/io/stream/StreamOutput.html" title="class in org.elasticsearch.common.io.stream">StreamOutput</a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../common/io/stream/Writeable.html#writeTo(org.elasticsearch.common.io.stream.StreamOutput)">writeTo</a></code>&nbsp;in interface&nbsp;<code><a href="../../common/io/stream/Writeable.html" title="interface in org.elasticsearch.common.io.stream">Writeable</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNumDocs()">getNumDocs</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getNumDocs</span>()</div>
<div class="block">Returns the number of documents in this store snapshot</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="hashFile(org.apache.lucene.util.BytesRefBuilder,java.io.InputStream,long)">hashFile</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">hashFile</span>&#8203;(<span class="arguments">org.apache.lucene.util.BytesRefBuilder&nbsp;fileHash,
java.io.InputStream&nbsp;in,
long&nbsp;size)</span>
                     throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Computes a strong hash value for small files. Note that this method should only be used for files &lt; 1MB</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="iterator()">iterator</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Iterator&lt;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;</span>&nbsp;<span class="memberName">iterator</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>iterator</code>&nbsp;in interface&nbsp;<code>java.lang.Iterable&lt;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="get(java.lang.String)">get</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a></span>&nbsp;<span class="memberName">get</span>&#8203;(<span class="arguments">java.lang.String&nbsp;name)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="asMap()">asMap</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Map&lt;java.lang.String,&#8203;<a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a>&gt;</span>&nbsp;<span class="memberName">asMap</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="recoveryDiff(org.elasticsearch.index.store.Store.MetadataSnapshot)">recoveryDiff</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Store.RecoveryDiff.html" title="class in org.elasticsearch.index.store">Store.RecoveryDiff</a></span>&nbsp;<span class="memberName">recoveryDiff</span>&#8203;(<span class="arguments"><a href="Store.MetadataSnapshot.html" title="class in org.elasticsearch.index.store">Store.MetadataSnapshot</a>&nbsp;recoveryTargetSnapshot)</span></div>
<div class="block">Returns a diff between the two snapshots that can be used for recovery. The given snapshot is treated as the
 recovery target and this snapshot as the source. The returned diff will hold a list of files that are:
 <ul>
 <li>identical: they exist in both snapshots and they can be considered the same ie. they don't need to be recovered</li>
 <li>different: they exist in both snapshots but their they are not identical</li>
 <li>missing: files that exist in the source but not in the target</li>
 </ul>
 This method groups file into per-segment files and per-commit files. A file is treated as
 identical if and on if all files in it's group are identical. On a per-segment level files for a segment are treated
 as identical iff:
 <ul>
 <li>all files in this segment have the same checksum</li>
 <li>all files in this segment have the same length</li>
 <li>the segments <code>.si</code> files hashes are byte-identical Note: This is a using a perfect hash function,
 The metadata transfers the <code>.si</code> file content as it's hash</li>
 </ul>
 <p>
 The <code>.si</code> file contains a lot of diagnostics including a timestamp etc. in the future there might be
 unique segment identifiers in there hardening this method further.
 <p>
 The per-commit files handles very similar. A commit is composed of the <code>segments_N</code> files as well as generational files
 like deletes (<code>_x_y.del</code>) or field-info (<code>_x_y.fnm</code>) files. On a per-commit level files for a commit are treated
 as identical iff:
 <ul>
 <li>all files belonging to this commit have the same checksum</li>
 <li>all files belonging to this commit have the same length</li>
 <li>the segments file <code>segments_N</code> files hashes are byte-identical Note: This is a using a perfect hash function,
 The metadata transfers the <code>segments_N</code> file content as it's hash</li>
 </ul>
 <p>
 NOTE: this diff will not contain the <code>segments.gen</code> file. This file is omitted on recovery.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="size()">size</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">size</span>()</div>
<div class="block">Returns the number of files in this snapshot</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCommitUserData()">getCommitUserData</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Map&lt;java.lang.String,&#8203;java.lang.String&gt;</span>&nbsp;<span class="memberName">getCommitUserData</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getHistoryUUID()">getHistoryUUID</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">getHistoryUUID</span>()</div>
<div class="block">returns the history uuid the store points at, or null if nonexistent.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="contains(java.lang.String)">contains</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">contains</span>&#8203;(<span class="arguments">java.lang.String&nbsp;existingFile)</span></div>
<div class="block">Returns true iff this metadata contains the given file.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSegmentsFile()">getSegmentsFile</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="StoreFileMetadata.html" title="class in org.elasticsearch.index.store">StoreFileMetadata</a></span>&nbsp;<span class="memberName">getSegmentsFile</span>()</div>
<div class="block">Returns the segments file that this metadata snapshot represents or null if the snapshot is empty.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSyncId()">getSyncId</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">getSyncId</span>()</div>
<div class="block">Returns the sync id of the commit point that this MetadataSnapshot represents.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>sync id if exists, else null</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
