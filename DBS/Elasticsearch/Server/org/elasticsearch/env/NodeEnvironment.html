<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>NodeEnvironment (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.env, class: NodeEnvironment">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":9,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":9,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":9,"i22":10,"i23":9,"i24":10,"i25":9,"i26":10,"i27":10,"i28":10,"i29":9,"i30":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.env</a></div>
<h1 title="Class NodeEnvironment" class="title">Class NodeEnvironment</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">org.elasticsearch.env.NodeEnvironment</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<hr>
<pre>public final class <span class="typeNameLabel">NodeEnvironment</span>
extends java.lang.Object
implements java.io.Closeable</pre>
<div class="block">A component that holds all data paths for a single node.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="NodeEnvironment.NodeLock.html" title="class in org.elasticsearch.env">NodeEnvironment.NodeLock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="NodeEnvironment.ShardLocker.html" title="interface in org.elasticsearch.env">NodeEnvironment.ShardLocker</a></span></code></th>
<td class="colLast">
<div class="block">A functional interface that people can use to reference <a href="#shardLock(org.elasticsearch.index.shard.ShardId,java.lang.String,long)"><code>shardLock(ShardId, String, long)</code></a></div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING">ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">If true the [verbose] SegmentInfos.infoStream logging is sent to System.out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#INDICES_FOLDER">INDICES_FOLDER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_LOCAL_STORAGE_NODES_SETTING">MAX_LOCAL_STORAGE_NODES_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Maximum number of data nodes that should run in an environment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NODE_ID_SEED_SETTING">NODE_ID_SEED_SETTING</a></span></code></th>
<td class="colLast">
<div class="block">Seed for determining a persisted unique uuid of this node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NODE_LOCK_FILENAME">NODE_LOCK_FILENAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NODES_FOLDER">NODES_FOLDER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.common.settings.Settings,org.elasticsearch.env.Environment)">NodeEnvironment</a></span>&#8203;(<a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="Environment.html" title="class in org.elasticsearch.env">Environment</a>&nbsp;environment)</code></th>
<td class="colLast">
<div class="block">Setup the environment.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireFSLockForPaths(org.elasticsearch.index.IndexSettings,java.nio.file.Path...)">acquireFSLockForPaths</a></span>&#8203;(<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.nio.file.Path...&nbsp;shardPaths)</code></th>
<td class="colLast">
<div class="block">Acquires, then releases, all <code>write.lock</code> files in the given
 shard paths.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFolders()">availableIndexFolders</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns all folder names in ${data.paths}/nodes/{node.id}/indices folder</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFolders(java.util.function.Predicate)">availableIndexFolders</a></span>&#8203;(java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)</code></th>
<td class="colLast">
<div class="block">Returns folder names in ${data.paths}/nodes/{node.id}/indices folder that don't match the given predicate.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath)">availableIndexFoldersForPath</a></span>&#8203;(<a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>&nbsp;nodePath)</code></th>
<td class="colLast">
<div class="block">Return all directory names in the nodes/{node.id}/indices directory for the given node path.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath,java.util.function.Predicate)">availableIndexFoldersForPath</a></span>&#8203;(<a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>&nbsp;nodePath,
java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)</code></th>
<td class="colLast">
<div class="block">Return directory names in the nodes/{node.id}/indices directory for the given node path that don't match the given predicate.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#availableShardPaths(org.elasticsearch.index.shard.ShardId)">availableShardPaths</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId)</code></th>
<td class="colLast">
<div class="block">Returns all shard paths excluding custom shard path.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteIndexDirectorySafe(org.elasticsearch.index.Index,long,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteIndexDirectorySafe</a></span>&#8203;(<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index,
long&nbsp;lockTimeoutMS,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Deletes an indexes data directory recursively iff all of the indexes
 shards locks were successfully acquired.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteIndexDirectoryUnderLock(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteIndexDirectoryUnderLock</a></span>&#8203;(<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Deletes an indexes data directory recursively.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteShardDirectorySafe(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteShardDirectorySafe</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Deletes a shard data directory iff the shards locks were successfully acquired.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteShardDirectoryUnderLock(org.elasticsearch.env.ShardLock,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteShardDirectoryUnderLock</a></span>&#8203;(<a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a>&nbsp;lock,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Deletes a shard data directory.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>java.util.Set&lt;<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findAllShardIds(org.elasticsearch.index.Index)">findAllShardIds</a></span>&#8203;(<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Tries to find all allocated shards for the given index
 on the current node.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateNodeId(org.elasticsearch.common.settings.Settings)">generateNodeId</a></span>&#8203;(<a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNodeLockId()">getNodeLockId</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasNodeFile()">hasNodeFile</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#indexPaths(org.elasticsearch.index.Index)">indexPaths</a></span>&#8203;(<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Returns all index paths.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>java.util.List&lt;<a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lockAllForIndex(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings,java.lang.String,long)">lockAllForIndex</a></span>&#8203;(<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;settings,
java.lang.String&nbsp;lockDetails,
long&nbsp;lockTimeoutMS)</code></th>
<td class="colLast">
<div class="block">Tries to lock all local shards for the given index.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>java.util.Set&lt;<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lockedShards()">lockedShards</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns all currently lock shards.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nodeDataPaths()">nodeDataPaths</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an array of all of the nodes data locations.</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nodeId()">nodeId</a></span>()</code></th>
<td class="colLast">
<div class="block">returns the unique uuid describing this node.</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code><a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nodePaths()">nodePaths</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an array of all of the <a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env"><code>NodeEnvironment.NodePath</code></a>s.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveBaseCustomLocation(java.lang.String,java.nio.file.Path,int)">resolveBaseCustomLocation</a></span>&#8203;(java.lang.String&nbsp;customDataPath,
java.nio.file.Path&nbsp;sharedDataPath,
int&nbsp;nodeLockId)</code></th>
<td class="colLast">
<div class="block">Resolve the custom path for a index's shard.</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveCustomLocation(java.lang.String,org.elasticsearch.index.shard.ShardId)">resolveCustomLocation</a></span>&#8203;(java.lang.String&nbsp;customDataPath,
<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId)</code></th>
<td class="colLast">
<div class="block">Resolve the custom path for a index's shard.</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveCustomLocation(java.lang.String,org.elasticsearch.index.shard.ShardId,java.nio.file.Path,int)">resolveCustomLocation</a></span>&#8203;(java.lang.String&nbsp;customDataPath,
<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId,
java.nio.file.Path&nbsp;sharedDataPath,
int&nbsp;nodeLockId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>java.nio.file.Path[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveIndexFolder(java.lang.String)">resolveIndexFolder</a></span>&#8203;(java.lang.String&nbsp;indexFolderName)</code></th>
<td class="colLast">
<div class="block">Resolves all existing paths to <code>indexFolderName</code> in ${data.paths}/nodes/{node.id}/indices</div>
</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolveNodePath(java.nio.file.Path,int)">resolveNodePath</a></span>&#8203;(java.nio.file.Path&nbsp;path,
int&nbsp;nodeLockId)</code></th>
<td class="colLast">
<div class="block">Resolve a specific nodes/{node.id} path for the specified path and node lock id.</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>java.util.Map&lt;<a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>,&#8203;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardCountPerPath(org.elasticsearch.index.Index)">shardCountPerPath</a></span>&#8203;(<a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Find all the shards for this index, returning a map of the <code>NodePath</code> to the number of shards on that path</div>
</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code><a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardLock(org.elasticsearch.index.shard.ShardId,java.lang.String)">shardLock</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;id,
java.lang.String&nbsp;details)</code></th>
<td class="colLast">
<div class="block">Tries to lock the given shards ID.</div>
</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code><a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardLock(org.elasticsearch.index.shard.ShardId,java.lang.String,long)">shardLock</a></span>&#8203;(<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId,
java.lang.String&nbsp;details,
long&nbsp;lockTimeoutMS)</code></th>
<td class="colLast">
<div class="block">Tries to lock the given shards ID.</div>
</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>static java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardStatePathToDataPath(java.nio.file.Path)">shardStatePathToDataPath</a></span>&#8203;(java.nio.file.Path&nbsp;shardPath)</code></th>
<td class="colLast">
<div class="block">Returns the <code>NodePath.path</code> for this shard.</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sharedDataPath()">sharedDataPath</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns shared data path for this node environment</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="MAX_LOCAL_STORAGE_NODES_SETTING">MAX_LOCAL_STORAGE_NODES_SETTING</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Integer&gt;</span>&nbsp;<span class="memberName">MAX_LOCAL_STORAGE_NODES_SETTING</span></div>
<div class="block">Maximum number of data nodes that should run in an environment.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="NODE_ID_SEED_SETTING">NODE_ID_SEED_SETTING</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Long&gt;</span>&nbsp;<span class="memberName">NODE_ID_SEED_SETTING</span></div>
<div class="block">Seed for determining a persisted unique uuid of this node. If the node has already a persisted uuid on disk,
 this seed will be ignored and the uuid from disk will be reused.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING">ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType"><a href="../common/settings/Setting.html" title="class in org.elasticsearch.common.settings">Setting</a>&lt;java.lang.Boolean&gt;</span>&nbsp;<span class="memberName">ENABLE_LUCENE_SEGMENT_INFOS_TRACE_SETTING</span></div>
<div class="block">If true the [verbose] SegmentInfos.infoStream logging is sent to System.out.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="NODES_FOLDER">NODES_FOLDER</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">NODES_FOLDER</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.env.NodeEnvironment.NODES_FOLDER">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="INDICES_FOLDER">INDICES_FOLDER</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">INDICES_FOLDER</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.env.NodeEnvironment.INDICES_FOLDER">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="NODE_LOCK_FILENAME">NODE_LOCK_FILENAME</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">NODE_LOCK_FILENAME</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.elasticsearch.env.NodeEnvironment.NODE_LOCK_FILENAME">Constant Field Values</a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.elasticsearch.common.settings.Settings,org.elasticsearch.env.Environment)">NodeEnvironment</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">NodeEnvironment</span>&#8203;(<span class="arguments"><a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="Environment.html" title="class in org.elasticsearch.env">Environment</a>&nbsp;environment)</span>
                throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Setup the environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>settings</code> - settings from elasticsearch.yml</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="resolveNodePath(java.nio.file.Path,int)">resolveNodePath</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">resolveNodePath</span>&#8203;(<span class="arguments">java.nio.file.Path&nbsp;path,
int&nbsp;nodeLockId)</span></div>
<div class="block">Resolve a specific nodes/{node.id} path for the specified path and node lock id.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path</dd>
<dd><code>nodeLockId</code> - the node lock id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the resolved path</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="generateNodeId(org.elasticsearch.common.settings.Settings)">generateNodeId</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">generateNodeId</span>&#8203;(<span class="arguments"><a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteShardDirectorySafe(org.elasticsearch.index.shard.ShardId,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteShardDirectorySafe</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteShardDirectorySafe</span>&#8203;(<span class="arguments"><a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</span>
                              throws <span class="exceptions">java.io.IOException,
<a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></span></div>
<div class="block">Deletes a shard data directory iff the shards locks were successfully acquired.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>shardId</code> - the id of the shard to delete to delete</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
<dd><code><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="acquireFSLockForPaths(org.elasticsearch.index.IndexSettings,java.nio.file.Path...)">acquireFSLockForPaths</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">acquireFSLockForPaths</span>&#8203;(<span class="arguments"><a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.nio.file.Path...&nbsp;shardPaths)</span>
                                  throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Acquires, then releases, all <code>write.lock</code> files in the given
 shard paths. The "write.lock" file is assumed to be under the shard
 path's "index" directory as used by Elasticsearch.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.apache.lucene.store.LockObtainFailedException</code> - if any of the locks could not be acquired</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteShardDirectoryUnderLock(org.elasticsearch.env.ShardLock,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteShardDirectoryUnderLock</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteShardDirectoryUnderLock</span>&#8203;(<span class="arguments"><a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a>&nbsp;lock,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</span>
                                   throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Deletes a shard data directory. Note: this method assumes that the shard
 lock is acquired. This method will also attempt to acquire the write
 locks for the shard's paths before deleting the data, but this is best
 effort, as the lock is released before the deletion happens in order to
 allow the folder to be deleted</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lock</code> - the shards lock</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
<dd><code><a href="../ElasticsearchException.html" title="class in org.elasticsearch">ElasticsearchException</a></code> - if the write.lock is not acquirable</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteIndexDirectorySafe(org.elasticsearch.index.Index,long,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteIndexDirectorySafe</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteIndexDirectorySafe</span>&#8203;(<span class="arguments"><a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index,
long&nbsp;lockTimeoutMS,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</span>
                              throws <span class="exceptions">java.io.IOException,
<a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></span></div>
<div class="block">Deletes an indexes data directory recursively iff all of the indexes
 shards locks were successfully acquired. If any of the indexes shard directories can't be locked
 non of the shards will be deleted</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - the index to delete</dd>
<dd><code>lockTimeoutMS</code> - how long to wait for acquiring the indices shard locks</dd>
<dd><code>indexSettings</code> - settings for the index being deleted</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if any of the shards data directories can't be locked or deleted</dd>
<dd><code><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteIndexDirectoryUnderLock(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings,java.util.function.Consumer)">deleteIndexDirectoryUnderLock</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteIndexDirectoryUnderLock</span>&#8203;(<span class="arguments"><a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;indexSettings,
java.util.function.Consumer&lt;java.nio.file.Path[]&gt;&nbsp;listener)</span>
                                   throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Deletes an indexes data directory recursively.
 Note: this method assumes that the shard lock is acquired</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - the index to delete</dd>
<dd><code>indexSettings</code> - settings for the index being deleted</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="lockAllForIndex(org.elasticsearch.index.Index,org.elasticsearch.index.IndexSettings,java.lang.String,long)">lockAllForIndex</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.List&lt;<a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a>&gt;</span>&nbsp;<span class="memberName">lockAllForIndex</span>&#8203;(<span class="arguments"><a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index,
<a href="../index/IndexSettings.html" title="class in org.elasticsearch.index">IndexSettings</a>&nbsp;settings,
java.lang.String&nbsp;lockDetails,
long&nbsp;lockTimeoutMS)</span>
                                          throws <span class="exceptions"><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></span></div>
<div class="block">Tries to lock all local shards for the given index. If any of the shard locks can't be acquired
 a <a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env"><code>ShardLockObtainFailedException</code></a> is thrown and all previously acquired locks are released.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - the index to lock shards for</dd>
<dd><code>lockTimeoutMS</code> - how long to wait for acquiring the indices shard locks</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <a href="ShardLock.html" title="class in org.elasticsearch.env"><code>ShardLock</code></a> instances for this index.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shardLock(org.elasticsearch.index.shard.ShardId,java.lang.String)">shardLock</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a></span>&nbsp;<span class="memberName">shardLock</span>&#8203;(<span class="arguments"><a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;id,
java.lang.String&nbsp;details)</span>
                    throws <span class="exceptions"><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></span></div>
<div class="block">Tries to lock the given shards ID. A shard lock is required to perform any kind of
 write operation on a shards data directory like deleting files, creating a new index writer
 or recover from a different shard instance into it. If the shard lock can not be acquired
 a <a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env"><code>ShardLockObtainFailedException</code></a> is thrown.

 Note: this method will return immediately if the lock can't be acquired.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the shard ID to lock</dd>
<dd><code>details</code> - information about why the shard is being locked</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the shard lock. Call <a href="ShardLock.html#close()"><code>ShardLock.close()</code></a> to release the lock</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shardLock(org.elasticsearch.index.shard.ShardId,java.lang.String,long)">shardLock</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="ShardLock.html" title="class in org.elasticsearch.env">ShardLock</a></span>&nbsp;<span class="memberName">shardLock</span>&#8203;(<span class="arguments"><a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId,
java.lang.String&nbsp;details,
long&nbsp;lockTimeoutMS)</span>
                    throws <span class="exceptions"><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></span></div>
<div class="block">Tries to lock the given shards ID. A shard lock is required to perform any kind of
 write operation on a shards data directory like deleting files, creating a new index writer
 or recover from a different shard instance into it. If the shard lock can not be acquired
 a <a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env"><code>ShardLockObtainFailedException</code></a> is thrown</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>shardId</code> - the shard ID to lock</dd>
<dd><code>details</code> - information about why the shard is being locked</dd>
<dd><code>lockTimeoutMS</code> - the lock timeout in milliseconds</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the shard lock. Call <a href="ShardLock.html#close()"><code>ShardLock.close()</code></a> to release the lock</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="ShardLockObtainFailedException.html" title="class in org.elasticsearch.env">ShardLockObtainFailedException</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="lockedShards()">lockedShards</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&gt;</span>&nbsp;<span class="memberName">lockedShards</span>()</div>
<div class="block">Returns all currently lock shards.

 Note: the shard ids return do not contain a valid Index UUID</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="hasNodeFile()">hasNodeFile</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">hasNodeFile</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nodeDataPaths()">nodeDataPaths</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path[]</span>&nbsp;<span class="memberName">nodeDataPaths</span>()</div>
<div class="block">Returns an array of all of the nodes data locations.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if the node is not configured to store local locations</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sharedDataPath()">sharedDataPath</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">sharedDataPath</span>()</div>
<div class="block">Returns shared data path for this node environment</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nodeId()">nodeId</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">nodeId</span>()</div>
<div class="block">returns the unique uuid describing this node. The uuid is persistent in the data folder of this node
 and remains across restarts.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nodePaths()">nodePaths</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>[]</span>&nbsp;<span class="memberName">nodePaths</span>()</div>
<div class="block">Returns an array of all of the <a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env"><code>NodeEnvironment.NodePath</code></a>s.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNodeLockId()">getNodeLockId</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getNodeLockId</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="indexPaths(org.elasticsearch.index.Index)">indexPaths</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path[]</span>&nbsp;<span class="memberName">indexPaths</span>&#8203;(<span class="arguments"><a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index)</span></div>
<div class="block">Returns all index paths.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="availableShardPaths(org.elasticsearch.index.shard.ShardId)">availableShardPaths</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path[]</span>&nbsp;<span class="memberName">availableShardPaths</span>&#8203;(<span class="arguments"><a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId)</span></div>
<div class="block">Returns all shard paths excluding custom shard path. Note: Shards are only allocated on one of the
 returned paths. The returned array may contain paths to non-existing directories.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../index/IndexSettings.html#hasCustomDataPath()"><code>IndexSettings.hasCustomDataPath()</code></a>, 
<a href="#resolveCustomLocation(java.lang.String,org.elasticsearch.index.shard.ShardId)"><code>resolveCustomLocation(String, ShardId)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="availableIndexFolders()">availableIndexFolders</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">availableIndexFolders</span>()
                                                      throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Returns all folder names in ${data.paths}/nodes/{node.id}/indices folder</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="availableIndexFolders(java.util.function.Predicate)">availableIndexFolders</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">availableIndexFolders</span>&#8203;(<span class="arguments">java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)</span>
                                                      throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Returns folder names in ${data.paths}/nodes/{node.id}/indices folder that don't match the given predicate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>excludeIndexPathIdsPredicate</code> - folder names to exclude</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath)">availableIndexFoldersForPath</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">availableIndexFoldersForPath</span>&#8203;(<span class="arguments"><a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>&nbsp;nodePath)</span>
                                                             throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Return all directory names in the nodes/{node.id}/indices directory for the given node path.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nodePath</code> - the path</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>all directories that could be indices for the given node path.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O exception occurs traversing the filesystem</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="availableIndexFoldersForPath(org.elasticsearch.env.NodeEnvironment.NodePath,java.util.function.Predicate)">availableIndexFoldersForPath</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">availableIndexFoldersForPath</span>&#8203;(<span class="arguments"><a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>&nbsp;nodePath,
java.util.function.Predicate&lt;java.lang.String&gt;&nbsp;excludeIndexPathIdsPredicate)</span>
                                                             throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Return directory names in the nodes/{node.id}/indices directory for the given node path that don't match the given predicate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nodePath</code> - the path</dd>
<dd><code>excludeIndexPathIdsPredicate</code> - folder names to exclude</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>all directories that could be indices for the given node path.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O exception occurs traversing the filesystem</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="resolveIndexFolder(java.lang.String)">resolveIndexFolder</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path[]</span>&nbsp;<span class="memberName">resolveIndexFolder</span>&#8203;(<span class="arguments">java.lang.String&nbsp;indexFolderName)</span></div>
<div class="block">Resolves all existing paths to <code>indexFolderName</code> in ${data.paths}/nodes/{node.id}/indices</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="findAllShardIds(org.elasticsearch.index.Index)">findAllShardIds</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&gt;</span>&nbsp;<span class="memberName">findAllShardIds</span>&#8203;(<span class="arguments"><a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index)</span>
                                       throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Tries to find all allocated shards for the given index
 on the current node. NOTE: This methods is prone to race-conditions on the filesystem layer since it might not
 see directories created concurrently or while it's traversing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - the index to filter shards</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a set of shard IDs</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shardCountPerPath(org.elasticsearch.index.Index)">shardCountPerPath</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Map&lt;<a href="NodeEnvironment.NodePath.html" title="class in org.elasticsearch.env">NodeEnvironment.NodePath</a>,&#8203;java.lang.Long&gt;</span>&nbsp;<span class="memberName">shardCountPerPath</span>&#8203;(<span class="arguments"><a href="../index/Index.html" title="class in org.elasticsearch.index">Index</a>&nbsp;index)</span>
                                                                         throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Find all the shards for this index, returning a map of the <code>NodePath</code> to the number of shards on that path</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - the index by which to filter shards</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a map of NodePath to count of the shards for the index on that path</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an IOException occurs</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="close()">close</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">close</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="resolveBaseCustomLocation(java.lang.String,java.nio.file.Path,int)">resolveBaseCustomLocation</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">resolveBaseCustomLocation</span>&#8203;(<span class="arguments">java.lang.String&nbsp;customDataPath,
java.nio.file.Path&nbsp;sharedDataPath,
int&nbsp;nodeLockId)</span></div>
<div class="block">Resolve the custom path for a index's shard.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="resolveCustomLocation(java.lang.String,org.elasticsearch.index.shard.ShardId)">resolveCustomLocation</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">resolveCustomLocation</span>&#8203;(<span class="arguments">java.lang.String&nbsp;customDataPath,
<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId)</span></div>
<div class="block">Resolve the custom path for a index's shard.
 Uses the <code>IndexMetadata.SETTING_DATA_PATH</code> setting to determine
 the root path for the index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customDataPath</code> - the custom data path</dd>
<dd><code>shardId</code> - shard to resolve the path to</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="resolveCustomLocation(java.lang.String,org.elasticsearch.index.shard.ShardId,java.nio.file.Path,int)">resolveCustomLocation</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">resolveCustomLocation</span>&#8203;(<span class="arguments">java.lang.String&nbsp;customDataPath,
<a href="../index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId,
java.nio.file.Path&nbsp;sharedDataPath,
int&nbsp;nodeLockId)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shardStatePathToDataPath(java.nio.file.Path)">shardStatePathToDataPath</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">shardStatePathToDataPath</span>&#8203;(<span class="arguments">java.nio.file.Path&nbsp;shardPath)</span></div>
<div class="block">Returns the <code>NodePath.path</code> for this shard.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
