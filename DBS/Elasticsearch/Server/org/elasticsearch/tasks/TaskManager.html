<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TaskManager (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.tasks, class: TaskManager">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.tasks</a></div>
<h1 title="Class TaskManager" class="title">Class TaskManager</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">org.elasticsearch.tasks.TaskManager</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../cluster/ClusterStateApplier.html" title="interface in org.elasticsearch.cluster">ClusterStateApplier</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">TaskManager</span>
extends java.lang.Object
implements <a href="../cluster/ClusterStateApplier.html" title="interface in org.elasticsearch.cluster">ClusterStateApplier</a></pre>
<div class="block">Task Manager service for keeping track of currently running tasks on the nodes</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.elasticsearch.common.settings.Settings,org.elasticsearch.threadpool.ThreadPool,java.util.Set)">TaskManager</a></span>&#8203;(<a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="../threadpool/ThreadPool.html" title="class in org.elasticsearch.threadpool">ThreadPool</a>&nbsp;threadPool,
java.util.Set&lt;java.lang.String&gt;&nbsp;taskHeaders)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">applyClusterState</a></span>&#8203;(<a href="../cluster/ClusterChangedEvent.html" title="class in org.elasticsearch.cluster">ClusterChangedEvent</a>&nbsp;event)</code></th>
<td class="colLast">
<div class="block">Called when a new cluster state (<a href="../cluster/ClusterChangedEvent.html#state()"><code>ClusterChangedEvent.state()</code></a> needs to be applied.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cancel(org.elasticsearch.tasks.CancellableTask,java.lang.String,java.lang.Runnable)">cancel</a></span>&#8203;(<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&nbsp;task,
java.lang.String&nbsp;reason,
java.lang.Runnable&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Cancels a task</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cancelTaskAndDescendants(org.elasticsearch.tasks.CancellableTask,java.lang.String,boolean,org.elasticsearch.action.ActionListener)">cancelTaskAndDescendants</a></span>&#8203;(<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&nbsp;task,
java.lang.String&nbsp;reason,
boolean&nbsp;waitForCompletion,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBanCount()">getBanCount</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the number of currently banned tasks.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>java.util.Set&lt;<a href="TaskId.html" title="class in org.elasticsearch.tasks">TaskId</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBannedTaskIds()">getBannedTaskIds</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code><a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCancellableTask(long)">getCancellableTask</a></span>&#8203;(long&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Returns a cancellable task with given id, or null if the task is not found.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>java.util.Map&lt;java.lang.Long,&#8203;<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCancellableTasks()">getCancellableTasks</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the list of currently running tasks on the node that can be cancelled</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTask(long)">getTask</a></span>&#8203;(long&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Returns a task with given id, or null if the task is not found.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>java.util.Map&lt;java.lang.Long,&#8203;<a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTasks()">getTasks</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the list of currently running tasks on the node</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code><a href="../cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#localNode()">localNode</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#register(java.lang.String,java.lang.String,org.elasticsearch.tasks.TaskAwareRequest)">register</a></span>&#8203;(java.lang.String&nbsp;type,
java.lang.String&nbsp;action,
<a href="TaskAwareRequest.html" title="interface in org.elasticsearch.tasks">TaskAwareRequest</a>&nbsp;request)</code></th>
<td class="colLast">
<div class="block">Registers a task without parent task</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerChildConnection(long,org.elasticsearch.transport.Transport.Connection)">registerChildConnection</a></span>&#8203;(long&nbsp;taskId,
<a href="../transport/Transport.Connection.html" title="interface in org.elasticsearch.transport">Transport.Connection</a>&nbsp;childConnection)</code></th>
<td class="colLast">
<div class="block">Register a connection on which a child task will execute on the target connection.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeBan(org.elasticsearch.tasks.TaskId)">removeBan</a></span>&#8203;(<a href="TaskId.html" title="class in org.elasticsearch.tasks">TaskId</a>&nbsp;parentTaskId)</code></th>
<td class="colLast">
<div class="block">Removes the ban for the specified parent task.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>java.util.List&lt;<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setBan(org.elasticsearch.tasks.TaskId,java.lang.String)">setBan</a></span>&#8203;(<a href="TaskId.html" title="class in org.elasticsearch.tasks">TaskId</a>&nbsp;parentTaskId,
java.lang.String&nbsp;reason)</code></th>
<td class="colLast">
<div class="block">Bans all tasks with the specified parent task from execution, cancels all tasks that are currently executing.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setTaskCancellationService(org.elasticsearch.tasks.TaskCancellationService)">setTaskCancellationService</a></span>&#8203;(<a href="TaskCancellationService.html" title="class in org.elasticsearch.tasks">TaskCancellationService</a>&nbsp;taskCancellationService)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setTaskResultsService(org.elasticsearch.tasks.TaskResultsService)">setTaskResultsService</a></span>&#8203;(<a href="TaskResultsService.html" title="class in org.elasticsearch.tasks">TaskResultsService</a>&nbsp;taskResultsService)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../transport/Transport.Connection.html" title="interface in org.elasticsearch.transport">Transport.Connection</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startBanOnChildTasks(long,java.lang.Runnable)">startBanOnChildTasks</a></span>&#8203;(long&nbsp;taskId,
java.lang.Runnable&nbsp;onChildTasksCompleted)</code></th>
<td class="colLast">
<div class="block">Start rejecting new child requests as the parent task was cancelled.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code><a href="../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startTrackingCancellableChannelTask(org.elasticsearch.transport.TcpChannel,org.elasticsearch.tasks.CancellableTask)">startTrackingCancellableChannelTask</a></span>&#8203;(<a href="../transport/TcpChannel.html" title="interface in org.elasticsearch.transport">TcpChannel</a>&nbsp;channel,
<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&nbsp;task)</code></th>
<td class="colLast">
<div class="block">Start tracking a cancellable task with its tcp channel, so if the channel gets closed we can get a set of
 pending tasks associated that channel and cancel them as these results won't be retrieved by the parent task.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>&lt;Response extends <a href="../action/ActionResponse.html" title="class in org.elasticsearch.action">ActionResponse</a>&gt;<br>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeResult(org.elasticsearch.tasks.Task,java.lang.Exception,org.elasticsearch.action.ActionListener)">storeResult</a></span>&#8203;(<a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task,
java.lang.Exception&nbsp;error,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;Response&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Stores the task failure</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>&lt;Response extends <a href="../action/ActionResponse.html" title="class in org.elasticsearch.action">ActionResponse</a>&gt;<br>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeResult(org.elasticsearch.tasks.Task,Response,org.elasticsearch.action.ActionListener)">storeResult</a></span>&#8203;(<a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task,
Response&nbsp;response,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;Response&gt;&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Stores the task result</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unregister(org.elasticsearch.tasks.Task)">unregister</a></span>&#8203;(<a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task)</code></th>
<td class="colLast">
<div class="block">Unregister the task</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitForTaskCompletion(org.elasticsearch.tasks.Task,long)">waitForTaskCompletion</a></span>&#8203;(<a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task,
long&nbsp;untilInNanos)</code></th>
<td class="colLast">
<div class="block">Blocks the calling thread, waiting for the task to vanish from the TaskManager.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.elasticsearch.common.settings.Settings,org.elasticsearch.threadpool.ThreadPool,java.util.Set)">TaskManager</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">TaskManager</span>&#8203;(<span class="arguments"><a href="../common/settings/Settings.html" title="class in org.elasticsearch.common.settings">Settings</a>&nbsp;settings,
<a href="../threadpool/ThreadPool.html" title="class in org.elasticsearch.threadpool">ThreadPool</a>&nbsp;threadPool,
java.util.Set&lt;java.lang.String&gt;&nbsp;taskHeaders)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="setTaskResultsService(org.elasticsearch.tasks.TaskResultsService)">setTaskResultsService</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setTaskResultsService</span>&#8203;(<span class="arguments"><a href="TaskResultsService.html" title="class in org.elasticsearch.tasks">TaskResultsService</a>&nbsp;taskResultsService)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setTaskCancellationService(org.elasticsearch.tasks.TaskCancellationService)">setTaskCancellationService</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setTaskCancellationService</span>&#8203;(<span class="arguments"><a href="TaskCancellationService.html" title="class in org.elasticsearch.tasks">TaskCancellationService</a>&nbsp;taskCancellationService)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="register(java.lang.String,java.lang.String,org.elasticsearch.tasks.TaskAwareRequest)">register</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a></span>&nbsp;<span class="memberName">register</span>&#8203;(<span class="arguments">java.lang.String&nbsp;type,
java.lang.String&nbsp;action,
<a href="TaskAwareRequest.html" title="interface in org.elasticsearch.tasks">TaskAwareRequest</a>&nbsp;request)</span></div>
<div class="block">Registers a task without parent task</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cancel(org.elasticsearch.tasks.CancellableTask,java.lang.String,java.lang.Runnable)">cancel</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">cancel</span>&#8203;(<span class="arguments"><a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&nbsp;task,
java.lang.String&nbsp;reason,
java.lang.Runnable&nbsp;listener)</span></div>
<div class="block">Cancels a task
 <p>
 After starting cancellation on the parent task, the task manager tries to cancel all children tasks
 of the current task. Once cancellation of the children tasks is done, the listener is triggered.
 If the task is completed or unregistered from TaskManager, then the listener is called immediately.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="unregister(org.elasticsearch.tasks.Task)">unregister</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a></span>&nbsp;<span class="memberName">unregister</span>&#8203;(<span class="arguments"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task)</span></div>
<div class="block">Unregister the task</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="registerChildConnection(long,org.elasticsearch.transport.Transport.Connection)">registerChildConnection</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></span>&nbsp;<span class="memberName">registerChildConnection</span>&#8203;(<span class="arguments">long&nbsp;taskId,
<a href="../transport/Transport.Connection.html" title="interface in org.elasticsearch.transport">Transport.Connection</a>&nbsp;childConnection)</span></div>
<div class="block">Register a connection on which a child task will execute on the target connection. The returned <a href="../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease"><code>Releasable</code></a> must be called
 to unregister the child connection once the child task is completed or failed.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="localNode()">localNode</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a></span>&nbsp;<span class="memberName">localNode</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="storeResult(org.elasticsearch.tasks.Task,java.lang.Exception,org.elasticsearch.action.ActionListener)">storeResult</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="typeParameters">&lt;Response extends <a href="../action/ActionResponse.html" title="class in org.elasticsearch.action">ActionResponse</a>&gt;</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">storeResult</span>&#8203;(<span class="arguments"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task,
java.lang.Exception&nbsp;error,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;Response&gt;&nbsp;listener)</span></div>
<div class="block">Stores the task failure</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="storeResult(org.elasticsearch.tasks.Task,org.elasticsearch.action.ActionResponse,org.elasticsearch.action.ActionListener)">
<!--   -->
</a><a id="storeResult(org.elasticsearch.tasks.Task,Response,org.elasticsearch.action.ActionListener)">storeResult</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="typeParameters">&lt;Response extends <a href="../action/ActionResponse.html" title="class in org.elasticsearch.action">ActionResponse</a>&gt;</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">storeResult</span>&#8203;(<span class="arguments"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task,
Response&nbsp;response,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;Response&gt;&nbsp;listener)</span></div>
<div class="block">Stores the task result</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getTasks()">getTasks</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Map&lt;java.lang.Long,&#8203;<a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&gt;</span>&nbsp;<span class="memberName">getTasks</span>()</div>
<div class="block">Returns the list of currently running tasks on the node</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCancellableTasks()">getCancellableTasks</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Map&lt;java.lang.Long,&#8203;<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&gt;</span>&nbsp;<span class="memberName">getCancellableTasks</span>()</div>
<div class="block">Returns the list of currently running tasks on the node that can be cancelled</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getTask(long)">getTask</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a></span>&nbsp;<span class="memberName">getTask</span>&#8203;(<span class="arguments">long&nbsp;id)</span></div>
<div class="block">Returns a task with given id, or null if the task is not found.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCancellableTask(long)">getCancellableTask</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a></span>&nbsp;<span class="memberName">getCancellableTask</span>&#8203;(<span class="arguments">long&nbsp;id)</span></div>
<div class="block">Returns a cancellable task with given id, or null if the task is not found.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getBanCount()">getBanCount</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getBanCount</span>()</div>
<div class="block">Returns the number of currently banned tasks.
 <p>
 Will be used in task manager stats and for debugging.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setBan(org.elasticsearch.tasks.TaskId,java.lang.String)">setBan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.List&lt;<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&gt;</span>&nbsp;<span class="memberName">setBan</span>&#8203;(<span class="arguments"><a href="TaskId.html" title="class in org.elasticsearch.tasks">TaskId</a>&nbsp;parentTaskId,
java.lang.String&nbsp;reason)</span></div>
<div class="block">Bans all tasks with the specified parent task from execution, cancels all tasks that are currently executing.
 <p>
 This method is called when a parent task that has children is cancelled.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of pending cancellable child tasks</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="removeBan(org.elasticsearch.tasks.TaskId)">removeBan</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">removeBan</span>&#8203;(<span class="arguments"><a href="TaskId.html" title="class in org.elasticsearch.tasks">TaskId</a>&nbsp;parentTaskId)</span></div>
<div class="block">Removes the ban for the specified parent task.
 <p>
 This method is called when a previously banned task finally cancelled</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getBannedTaskIds()">getBannedTaskIds</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Set&lt;<a href="TaskId.html" title="class in org.elasticsearch.tasks">TaskId</a>&gt;</span>&nbsp;<span class="memberName">getBannedTaskIds</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startBanOnChildTasks(long,java.lang.Runnable)">startBanOnChildTasks</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Collection&lt;<a href="../transport/Transport.Connection.html" title="interface in org.elasticsearch.transport">Transport.Connection</a>&gt;</span>&nbsp;<span class="memberName">startBanOnChildTasks</span>&#8203;(<span class="arguments">long&nbsp;taskId,
java.lang.Runnable&nbsp;onChildTasksCompleted)</span></div>
<div class="block">Start rejecting new child requests as the parent task was cancelled.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>taskId</code> - the parent task id</dd>
<dd><code>onChildTasksCompleted</code> - called when all child tasks are completed or failed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a set of current connections that have outstanding child tasks</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">applyClusterState</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">applyClusterState</span>&#8203;(<span class="arguments"><a href="../cluster/ClusterChangedEvent.html" title="class in org.elasticsearch.cluster">ClusterChangedEvent</a>&nbsp;event)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../cluster/ClusterStateApplier.html#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">ClusterStateApplier</a></code></span></div>
<div class="block">Called when a new cluster state (<a href="../cluster/ClusterChangedEvent.html#state()"><code>ClusterChangedEvent.state()</code></a> needs to be applied. The cluster state to be applied is already
 committed when this method is called, so an applier must therefore be prepared to deal with any state it receives without throwing
 an exception. Throwing an exception from an applier is very bad because it will stop the application of this state before it has
 reached all the other appliers, and will likely result in another attempt to apply the same (or very similar) cluster state which
 might continue until this node is removed from the cluster.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../cluster/ClusterStateApplier.html#applyClusterState(org.elasticsearch.cluster.ClusterChangedEvent)">applyClusterState</a></code>&nbsp;in interface&nbsp;<code><a href="../cluster/ClusterStateApplier.html" title="interface in org.elasticsearch.cluster">ClusterStateApplier</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="waitForTaskCompletion(org.elasticsearch.tasks.Task,long)">waitForTaskCompletion</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">waitForTaskCompletion</span>&#8203;(<span class="arguments"><a href="Task.html" title="class in org.elasticsearch.tasks">Task</a>&nbsp;task,
long&nbsp;untilInNanos)</span></div>
<div class="block">Blocks the calling thread, waiting for the task to vanish from the TaskManager.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startTrackingCancellableChannelTask(org.elasticsearch.transport.TcpChannel,org.elasticsearch.tasks.CancellableTask)">startTrackingCancellableChannelTask</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></span>&nbsp;<span class="memberName">startTrackingCancellableChannelTask</span>&#8203;(<span class="arguments"><a href="../transport/TcpChannel.html" title="interface in org.elasticsearch.transport">TcpChannel</a>&nbsp;channel,
<a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&nbsp;task)</span></div>
<div class="block">Start tracking a cancellable task with its tcp channel, so if the channel gets closed we can get a set of
 pending tasks associated that channel and cancel them as these results won't be retrieved by the parent task.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a releasable that should be called when this pending task is completed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cancelTaskAndDescendants(org.elasticsearch.tasks.CancellableTask,java.lang.String,boolean,org.elasticsearch.action.ActionListener)">cancelTaskAndDescendants</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">cancelTaskAndDescendants</span>&#8203;(<span class="arguments"><a href="CancellableTask.html" title="class in org.elasticsearch.tasks">CancellableTask</a>&nbsp;task,
java.lang.String&nbsp;reason,
boolean&nbsp;waitForCompletion,
<a href="../action/ActionListener.html" title="interface in org.elasticsearch.action">ActionListener</a>&lt;java.lang.Void&gt;&nbsp;listener)</span></div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
