<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>AggregatorBase (server 7.11.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="description" content="declaration: package: org.elasticsearch.search.aggregations, class: AggregatorBase">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":6,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.elasticsearch.search.aggregations</a></div>
<h1 title="Class AggregatorBase" class="title">Class AggregatorBase</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance"><a href="BucketCollector.html" title="class in org.elasticsearch.search.aggregations">org.elasticsearch.search.aggregations.BucketCollector</a>
<div class="inheritance"><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">org.elasticsearch.search.aggregations.Aggregator</a>
<div class="inheritance">org.elasticsearch.search.aggregations.AggregatorBase</div>
</div>
</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code>, <code>org.apache.lucene.search.Collector</code>, <code><a href="../../common/lease/Releasable.html" title="interface in org.elasticsearch.common.lease">Releasable</a></code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="bucket/BucketsAggregator.html" title="class in org.elasticsearch.search.aggregations.bucket">BucketsAggregator</a></code>, <code><a href="metrics/MetricsAggregator.html" title="class in org.elasticsearch.search.aggregations.metrics">MetricsAggregator</a></code>, <code><a href="NonCollectingAggregator.html" title="class in org.elasticsearch.search.aggregations">NonCollectingAggregator</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">AggregatorBase</span>
extends <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></pre>
<div class="block">Base implementation for concrete aggregators.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="inheritedList">
<h2>Nested classes/interfaces inherited from class&nbsp;org.elasticsearch.search.aggregations.<a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></h2>
<a id="nested.classes.inherited.from.class.org.elasticsearch.search.aggregations.Aggregator">
<!--   -->
</a><code><a href="Aggregator.BucketComparator.html" title="interface in org.elasticsearch.search.aggregations">Aggregator.BucketComparator</a>, <a href="Aggregator.Parser.html" title="interface in org.elasticsearch.search.aggregations">Aggregator.Parser</a>, <a href="Aggregator.SubAggCollectionMode.html" title="enum in org.elasticsearch.search.aggregations">Aggregator.SubAggCollectionMode</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="BucketCollector.html" title="class in org.elasticsearch.search.aggregations">BucketCollector</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#collectableSubAggregators">collectableSubAggregators</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_WEIGHT">DEFAULT_WEIGHT</a></span></code></th>
<td class="colLast">
<div class="block">The default "weight" that a bucket takes when performing an aggregation</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#name">name</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parent">parent</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#subAggregators">subAggregators</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h3>Fields inherited from class&nbsp;org.elasticsearch.search.aggregations.<a href="BucketCollector.html" title="class in org.elasticsearch.search.aggregations">BucketCollector</a></h3>
<a id="fields.inherited.from.class.org.elasticsearch.search.aggregations.BucketCollector">
<!--   -->
</a><code><a href="BucketCollector.html#NO_OP_COLLECTOR">NO_OP_COLLECTOR</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,org.elasticsearch.search.aggregations.AggregatorFactories,org.elasticsearch.search.aggregations.support.AggregationContext,org.elasticsearch.search.aggregations.Aggregator,org.elasticsearch.search.aggregations.CardinalityUpperBound,java.util.Map)">AggregatorBase</a></span>&#8203;(java.lang.String&nbsp;name,
<a href="AggregatorFactories.html" title="class in org.elasticsearch.search.aggregations">AggregatorFactories</a>&nbsp;factories,
<a href="support/AggregationContext.html" title="class in org.elasticsearch.search.aggregations.support">AggregationContext</a>&nbsp;context,
<a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>&nbsp;parent,
<a href="CardinalityUpperBound.html" title="class in org.elasticsearch.search.aggregations">CardinalityUpperBound</a>&nbsp;subAggregatorCardinality,
java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Constructs a new Aggregator.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addRequestCircuitBreakerBytes(long)">addRequestCircuitBreakerBytes</a></span>&#8203;(long&nbsp;bytes)</code></th>
<td class="colLast">
<div class="block">Increment or decrement the number of bytes that have been allocated to service
 this request and potentially trigger a <a href="../../common/breaker/CircuitBreakingException.html" title="class in org.elasticsearch.common.breaker"><code>CircuitBreakingException</code></a>.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>protected <a href="../../common/util/BigArrays.html" title="class in org.elasticsearch.common.util">BigArrays</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bigArrays()">bigArrays</a></span>()</code></th>
<td class="colLast">
<div class="block">Utilities for sharing large primitive arrays and tracking their usage.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>protected <a href="InternalAggregations.html" title="class in org.elasticsearch.search.aggregations">InternalAggregations</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildEmptySubAggregations()">buildEmptySubAggregations</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Called upon release of the aggregator.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doClose()">doClose</a></span>()</code></th>
<td class="colLast">
<div class="block">Release instance-specific data.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doPreCollection()">doPreCollection</a></span>()</code></th>
<td class="colLast">
<div class="block">Can be overridden by aggregator implementation to be called back when the collection phase starts.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations">LeafBucketCollector</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLeafCollector(org.apache.lucene.index.LeafReaderContext)">getLeafCollector</a></span>&#8203;(org.apache.lucene.index.LeafReaderContext&nbsp;ctx)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>protected abstract <a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations">LeafBucketCollector</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLeafCollector(org.apache.lucene.index.LeafReaderContext,org.elasticsearch.search.aggregations.LeafBucketCollector)">getLeafCollector</a></span>&#8203;(org.apache.lucene.index.LeafReaderContext&nbsp;ctx,
<a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations">LeafBucketCollector</a>&nbsp;sub)</code></th>
<td class="colLast">
<div class="block">Get a <a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations"><code>LeafBucketCollector</code></a> for the given ctx, which should
 delegate to the given collector.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#metadata()">metadata</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#name()">name</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the name of this aggregator.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parent()">parent</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the parent aggregator.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>java.util.function.Function&lt;byte[],&#8203;java.lang.Number&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pointReaderIfAvailable(org.elasticsearch.search.aggregations.support.ValuesSourceConfig)">pointReaderIfAvailable</a></span>&#8203;(<a href="support/ValuesSourceConfig.html" title="class in org.elasticsearch.search.aggregations.support">ValuesSourceConfig</a>&nbsp;config)</code></th>
<td class="colLast">
<div class="block">Returns a converter for point values if it's safe to use the indexed data instead of
 doc values.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#preCollection()">preCollection</a></span>()</code></th>
<td class="colLast">
<div class="block">Pre collection callback.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#preGetSubLeafCollectors(org.apache.lucene.index.LeafReaderContext)">preGetSubLeafCollectors</a></span>&#8203;(org.apache.lucene.index.LeafReaderContext&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Can be overridden by aggregator implementations that like the perform an operation before the leaf collectors
 of children aggregators are instantiated for the next segment.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>org.apache.lucene.search.ScoreMode</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#scoreMode()">scoreMode</a></span>()</code></th>
<td class="colLast">
<div class="block">Most aggregators don't need scores, make sure to extend this method if
 your aggregator needs them.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>protected org.apache.lucene.search.IndexSearcher</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#searcher()">searcher</a></span>()</code></th>
<td class="colLast">
<div class="block">The searcher for the shard this <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a> is running
 against.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#subAggregator(java.lang.String)">subAggregator</a></span>&#8203;(java.lang.String&nbsp;aggName)</code></th>
<td class="colLast">
<div class="block">Return the sub aggregator with the provided name.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#subAggregators()">subAggregators</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the aggregators running under this one.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>protected org.apache.lucene.search.Query</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#topLevelQuery()">topLevelQuery</a></span>()</code></th>
<td class="colLast">
<div class="block">The "top level" query that will filter the results sent to this
 <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>.</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;org.elasticsearch.search.aggregations.<a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></h3>
<a id="methods.inherited.from.class.org.elasticsearch.search.aggregations.Aggregator">
<!--   -->
</a><code><a href="Aggregator.html#bucketComparator(java.lang.String,org.elasticsearch.search.sort.SortOrder)">bucketComparator</a>, <a href="Aggregator.html#buildAggregations(long%5B%5D)">buildAggregations</a>, <a href="Aggregator.html#buildEmptyAggregation()">buildEmptyAggregation</a>, <a href="Aggregator.html#buildTopLevel()">buildTopLevel</a>, <a href="Aggregator.html#collectDebugInfo(java.util.function.BiConsumer)">collectDebugInfo</a>, <a href="Aggregator.html#resolveSortPath(org.elasticsearch.search.aggregations.support.AggregationPath.PathElement,java.util.Iterator)">resolveSortPath</a>, <a href="Aggregator.html#resolveSortPathOnValidAgg(org.elasticsearch.search.aggregations.support.AggregationPath.PathElement,java.util.Iterator)">resolveSortPathOnValidAgg</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="DEFAULT_WEIGHT">DEFAULT_WEIGHT</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">DEFAULT_WEIGHT</span></div>
<div class="block">The default "weight" that a bucket takes when performing an aggregation</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.elasticsearch.search.aggregations.AggregatorBase.DEFAULT_WEIGHT">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="name">name</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">name</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parent">parent</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType"><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></span>&nbsp;<span class="memberName">parent</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="subAggregators">subAggregators</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType"><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>[]</span>&nbsp;<span class="memberName">subAggregators</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="collectableSubAggregators">collectableSubAggregators</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="BucketCollector.html" title="class in org.elasticsearch.search.aggregations">BucketCollector</a></span>&nbsp;<span class="memberName">collectableSubAggregators</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(java.lang.String,org.elasticsearch.search.aggregations.AggregatorFactories,org.elasticsearch.search.aggregations.support.AggregationContext,org.elasticsearch.search.aggregations.Aggregator,org.elasticsearch.search.aggregations.CardinalityUpperBound,java.util.Map)">AggregatorBase</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="memberName">AggregatorBase</span>&#8203;(<span class="arguments">java.lang.String&nbsp;name,
<a href="AggregatorFactories.html" title="class in org.elasticsearch.search.aggregations">AggregatorFactories</a>&nbsp;factories,
<a href="support/AggregationContext.html" title="class in org.elasticsearch.search.aggregations.support">AggregationContext</a>&nbsp;context,
<a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>&nbsp;parent,
<a href="CardinalityUpperBound.html" title="class in org.elasticsearch.search.aggregations">CardinalityUpperBound</a>&nbsp;subAggregatorCardinality,
java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;&nbsp;metadata)</span>
                  throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Constructs a new Aggregator.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The name of the aggregation</dd>
<dd><code>factories</code> - The factories for all the sub-aggregators under this aggregator</dd>
<dd><code>context</code> - The aggregation context</dd>
<dd><code>parent</code> - The parent aggregator (may be <code>null</code> for top level aggregators)</dd>
<dd><code>subAggregatorCardinality</code> - Upper bound of the number of buckets that sub aggregations will collect</dd>
<dd><code>metadata</code> - The metadata associated with this aggregator</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="pointReaderIfAvailable(org.elasticsearch.search.aggregations.support.ValuesSourceConfig)">pointReaderIfAvailable</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">java.util.function.Function&lt;byte[],&#8203;java.lang.Number&gt;</span>&nbsp;<span class="memberName">pointReaderIfAvailable</span>&#8203;(<span class="arguments"><a href="support/ValuesSourceConfig.html" title="class in org.elasticsearch.search.aggregations.support">ValuesSourceConfig</a>&nbsp;config)</span></div>
<div class="block">Returns a converter for point values if it's safe to use the indexed data instead of
 doc values.  Generally, this means that the query has no filters or scripts, the aggregation is
 top level, and the underlying field is indexed, and the index is sorted in the right order.

 If those conditions aren't met, return <code>null</code> to indicate a point reader cannot
 be used in this case.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - The config for the values source metric.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="addRequestCircuitBreakerBytes(long)">addRequestCircuitBreakerBytes</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">addRequestCircuitBreakerBytes</span>&#8203;(<span class="arguments">long&nbsp;bytes)</span></div>
<div class="block">Increment or decrement the number of bytes that have been allocated to service
 this request and potentially trigger a <a href="../../common/breaker/CircuitBreakingException.html" title="class in org.elasticsearch.common.breaker"><code>CircuitBreakingException</code></a>. The
 number of bytes allocated is automatically decremented with the circuit breaker
 service on closure of this aggregator.
 If memory has been returned, decrement it without tripping the breaker.
 For performance reasons subclasses should not call this millions of times
 each with small increments and instead batch up into larger allocations.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bytes</code> - the number of bytes to register or negative to deregister the bytes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the cumulative size in bytes allocated by this aggregator to service this request</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="scoreMode()">scoreMode</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">org.apache.lucene.search.ScoreMode</span>&nbsp;<span class="memberName">scoreMode</span>()</div>
<div class="block">Most aggregators don't need scores, make sure to extend this method if
 your aggregator needs them.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="metadata()">metadata</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;</span>&nbsp;<span class="memberName">metadata</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLeafCollector(org.apache.lucene.index.LeafReaderContext,org.elasticsearch.search.aggregations.LeafBucketCollector)">getLeafCollector</a></h3>
<div class="memberSignature"><span class="modifiers">protected abstract</span>&nbsp;<span class="returnType"><a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations">LeafBucketCollector</a></span>&nbsp;<span class="memberName">getLeafCollector</span>&#8203;(<span class="arguments">org.apache.lucene.index.LeafReaderContext&nbsp;ctx,
<a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations">LeafBucketCollector</a>&nbsp;sub)</span>
                                                 throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Get a <a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations"><code>LeafBucketCollector</code></a> for the given ctx, which should
 delegate to the given collector.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLeafCollector(org.apache.lucene.index.LeafReaderContext)">getLeafCollector</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType"><a href="LeafBucketCollector.html" title="class in org.elasticsearch.search.aggregations">LeafBucketCollector</a></span>&nbsp;<span class="memberName">getLeafCollector</span>&#8203;(<span class="arguments">org.apache.lucene.index.LeafReaderContext&nbsp;ctx)</span>
                                           throws <span class="exceptions">java.io.IOException</span></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getLeafCollector</code>&nbsp;in interface&nbsp;<code>org.apache.lucene.search.Collector</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="BucketCollector.html#getLeafCollector(org.apache.lucene.index.LeafReaderContext)">getLeafCollector</a></code>&nbsp;in class&nbsp;<code><a href="BucketCollector.html" title="class in org.elasticsearch.search.aggregations">BucketCollector</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="preGetSubLeafCollectors(org.apache.lucene.index.LeafReaderContext)">preGetSubLeafCollectors</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">preGetSubLeafCollectors</span>&#8203;(<span class="arguments">org.apache.lucene.index.LeafReaderContext&nbsp;ctx)</span>
                                throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Can be overridden by aggregator implementations that like the perform an operation before the leaf collectors
 of children aggregators are instantiated for the next segment.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doPreCollection()">doPreCollection</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doPreCollection</span>()
                        throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Can be overridden by aggregator implementation to be called back when the collection phase starts.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="preCollection()">preCollection</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">preCollection</span>()
                         throws <span class="exceptions">java.io.IOException</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="BucketCollector.html#preCollection()">BucketCollector</a></code></span></div>
<div class="block">Pre collection callback.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="BucketCollector.html#preCollection()">preCollection</a></code>&nbsp;in class&nbsp;<code><a href="BucketCollector.html" title="class in org.elasticsearch.search.aggregations">BucketCollector</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="name()">name</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">name</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="Aggregator.html#name()">Aggregator</a></code></span></div>
<div class="block">Return the name of this aggregator.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="Aggregator.html#name()">name</a></code>&nbsp;in class&nbsp;<code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The name of the aggregation.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parent()">parent</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></span>&nbsp;<span class="memberName">parent</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="Aggregator.html#parent()">Aggregator</a></code></span></div>
<div class="block">Return the parent aggregator.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="Aggregator.html#parent()">parent</a></code>&nbsp;in class&nbsp;<code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The parent aggregator of this aggregator. The addAggregation are hierarchical in the sense that some can
          be composed out of others (more specifically, bucket addAggregation can define other addAggregation that will
          be aggregated per bucket). This method returns the direct parent aggregator that contains this aggregator, or
          <code>null</code> if there is none (meaning, this aggregator is a top level one)</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="subAggregators()">subAggregators</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>[]</span>&nbsp;<span class="memberName">subAggregators</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="Aggregator.html#subAggregators()">Aggregator</a></code></span></div>
<div class="block">Get the aggregators running under this one.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="Aggregator.html#subAggregators()">subAggregators</a></code>&nbsp;in class&nbsp;<code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="subAggregator(java.lang.String)">subAggregator</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></span>&nbsp;<span class="memberName">subAggregator</span>&#8203;(<span class="arguments">java.lang.String&nbsp;aggName)</span></div>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="Aggregator.html#subAggregator(java.lang.String)">Aggregator</a></code></span></div>
<div class="block">Return the sub aggregator with the provided name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="Aggregator.html#subAggregator(java.lang.String)">subAggregator</a></code>&nbsp;in class&nbsp;<code><a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="close()">close</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">close</span>()</div>
<div class="block">Called upon release of the aggregator.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="doClose()">doClose</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">doClose</span>()</div>
<div class="block">Release instance-specific data.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="buildEmptySubAggregations()">buildEmptySubAggregations</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType"><a href="InternalAggregations.html" title="class in org.elasticsearch.search.aggregations">InternalAggregations</a></span>&nbsp;<span class="memberName">buildEmptySubAggregations</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="toString()">toString</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">toString</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="bigArrays()">bigArrays</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType"><a href="../../common/util/BigArrays.html" title="class in org.elasticsearch.common.util">BigArrays</a></span>&nbsp;<span class="memberName">bigArrays</span>()</div>
<div class="block">Utilities for sharing large primitive arrays and tracking their usage.
 Used by all subclasses.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="topLevelQuery()">topLevelQuery</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">org.apache.lucene.search.Query</span>&nbsp;<span class="memberName">topLevelQuery</span>()</div>
<div class="block">The "top level" query that will filter the results sent to this
 <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>. Used by all <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>s that
 perform extra collection phases in addition to the one done in
 <a href="#getLeafCollector(org.apache.lucene.index.LeafReaderContext,org.elasticsearch.search.aggregations.LeafBucketCollector)"><code>getLeafCollector(LeafReaderContext, LeafBucketCollector)</code></a>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="searcher()">searcher</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">org.apache.lucene.search.IndexSearcher</span>&nbsp;<span class="memberName">searcher</span>()</div>
<div class="block">The searcher for the shard this <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a> is running
 against. Used by all <a href="Aggregator.html" title="class in org.elasticsearch.search.aggregations">Aggregator</a>s that perform extra
 collection phases in addition to the one done in
 <a href="#getLeafCollector(org.apache.lucene.index.LeafReaderContext,org.elasticsearch.search.aggregations.LeafBucketCollector)"><code>getLeafCollector(LeafReaderContext, LeafBucketCollector)</code></a>
 and by to look up extra "background" information about contents of
 the shard itself.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
